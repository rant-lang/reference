<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js ayu">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Rant Reference</title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="The Rant Reference documents the Rant language and standard library.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
        <link rel="stylesheet" href="theme/custom.css">
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "ayu";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="intro.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="language.html"><strong aria-hidden="true">2.</strong> Language Features</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="language/text.html"><strong aria-hidden="true">2.1.</strong> Text</a></li><li class="chapter-item expanded "><a href="language/blocks.html"><strong aria-hidden="true">2.2.</strong> Blocks</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="language/blocks/stored-blocks.html"><strong aria-hidden="true">2.2.1.</strong> Stored Blocks</a></li></ol></li><li class="chapter-item expanded "><a href="language/functions.html"><strong aria-hidden="true">2.3.</strong> Functions</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="language/functions/closures.html"><strong aria-hidden="true">2.3.1.</strong> Closures</a></li><li class="chapter-item expanded "><a href="language/functions/argument-spreading.html"><strong aria-hidden="true">2.3.2.</strong> Argument spreading</a></li><li class="chapter-item expanded "><a href="language/functions/composition.html"><strong aria-hidden="true">2.3.3.</strong> Composition</a></li></ol></li><li class="chapter-item expanded "><a href="language/keywords.html"><strong aria-hidden="true">2.4.</strong> Keywords</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="language/keywords/return.html"><strong aria-hidden="true">2.4.1.</strong> @return</a></li><li class="chapter-item expanded "><a href="language/keywords/continue.html"><strong aria-hidden="true">2.4.2.</strong> @continue</a></li><li class="chapter-item expanded "><a href="language/keywords/break.html"><strong aria-hidden="true">2.4.3.</strong> @break</a></li><li class="chapter-item expanded "><a href="language/keywords/weight.html"><strong aria-hidden="true">2.4.4.</strong> @weight</a></li></ol></li><li class="chapter-item expanded "><a href="language/comments.html"><strong aria-hidden="true">2.5.</strong> Comments</a></li><li class="chapter-item expanded "><a href="language/escape-sequences.html"><strong aria-hidden="true">2.6.</strong> Escape Sequences</a></li><li class="chapter-item expanded "><a href="language/collections.html"><strong aria-hidden="true">2.7.</strong> Collections</a></li><li class="chapter-item expanded "><a href="language/accessors.html"><strong aria-hidden="true">2.8.</strong> Accessors</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="language/accessors/collection-access.html"><strong aria-hidden="true">2.8.1.</strong> Collection Access</a></li><li class="chapter-item expanded "><a href="language/accessors/anonymous.html"><strong aria-hidden="true">2.8.2.</strong> Anonymous Accessors</a></li><li class="chapter-item expanded "><a href="language/accessors/fallbacks.html"><strong aria-hidden="true">2.8.3.</strong> Fallbacks</a></li><li class="chapter-item expanded "><a href="language/accessors/globals-descoping.html"><strong aria-hidden="true">2.8.4.</strong> Globals &amp; Descoping</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="variables-types.html"><strong aria-hidden="true">3.</strong> Variables &amp; Data Types</a></li><li class="chapter-item expanded "><a href="runtime.html"><strong aria-hidden="true">4.</strong> Runtime Features</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="runtime/attributes.html"><strong aria-hidden="true">4.1.</strong> Attributes</a></li><li class="chapter-item expanded "><a href="runtime/formatters.html"><strong aria-hidden="true">4.2.</strong> Formatters</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="runtime/case-formatter.html"><strong aria-hidden="true">4.2.1.</strong> Case</a></li><li class="chapter-item expanded "><a href="runtime/number-formatter.html"><strong aria-hidden="true">4.2.2.</strong> Numbers</a></li><li class="chapter-item expanded "><a href="runtime/whitespace-formatter.html"><strong aria-hidden="true">4.2.3.</strong> Whitespace</a></li></ol></li><li class="chapter-item expanded "><a href="modules.html"><strong aria-hidden="true">4.3.</strong> Modules</a></li></ol></li><li class="chapter-item expanded "><strong aria-hidden="true">5.</strong> Proposed Features</li><li><ol class="section"><li class="chapter-item expanded "><a href="language/keywords/if-elseif-else.html"><strong aria-hidden="true">5.1.</strong> @if, @elseif, @else</a></li><li class="chapter-item expanded "><a href="language/keywords/is.html"><strong aria-hidden="true">5.2.</strong> @is*</a></li></ol></li><li class="chapter-item expanded "><a href="stdlib.html"><strong aria-hidden="true">6.</strong> Standard Library</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="stdlib/general.html"><strong aria-hidden="true">6.1.</strong> General</a></li><li class="chapter-item expanded "><a href="stdlib/control-flow.html"><strong aria-hidden="true">6.2.</strong> Attributes &amp; Control Flow</a></li><li class="chapter-item expanded "><a href="stdlib/collections.html"><strong aria-hidden="true">6.3.</strong> Collections</a></li><li class="chapter-item expanded "><a href="stdlib/generators.html"><strong aria-hidden="true">6.4.</strong> Generators</a></li><li class="chapter-item expanded "><a href="stdlib/formatting.html"><strong aria-hidden="true">6.5.</strong> Formatting</a></li><li class="chapter-item expanded "><a href="stdlib/strings.html"><strong aria-hidden="true">6.6.</strong> Strings</a></li><li class="chapter-item expanded "><a href="stdlib/boolean.html"><strong aria-hidden="true">6.7.</strong> Boolean</a></li><li class="chapter-item expanded "><a href="stdlib/comparison.html"><strong aria-hidden="true">6.8.</strong> Comparison</a></li><li class="chapter-item expanded "><a href="stdlib/math.html"><strong aria-hidden="true">6.9.</strong> Math</a></li><li class="chapter-item expanded "><a href="stdlib/conversion.html"><strong aria-hidden="true">6.10.</strong> Conversion</a></li><li class="chapter-item expanded "><a href="stdlib/verification.html"><strong aria-hidden="true">6.11.</strong> Verification</a></li><li class="chapter-item expanded "><a href="stdlib/assertion.html"><strong aria-hidden="true">6.12.</strong> Assertion</a></li><li class="chapter-item expanded "><a href="stdlib/constants.html"><strong aria-hidden="true">6.13.</strong> Constants</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="glossary.html">Glossary</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu (default)</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Rant Reference</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        <a href="https://github.com/rant-lang/reference" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#introduction" id="introduction">Introduction</a></h1>
<blockquote>
<p>This document is a work-in-progress and is not normative.
It only applies to version 4 of the Rant language.</p>
<p>Found an error? Want something improved? <a href="https://github.com/rant-lang/reference/issues">Submit an issue</a> or a pull request!</p>
</blockquote>
<p>This documentation is a reference for the language features, standard library, and major runtime features of version 4.x of Rant.
While every effort is made to make the documentation as approachable as possible, it is not primarily intended to be a beginner's guide to the language.</p>
<h2><a class="header" href="#scope" id="scope">Scope</a></h2>
<p>This documentation is divided into the following chapters:</p>
<ul>
<li><a href="/language.html"><strong>Language features:</strong></a> Overview of Rant as a language. </li>
<li><a href="/runtime.html"><strong>Runtime features:</strong></a> Overview of features specific to the runtime.</li>
<li><a href="/stdlib.html"><strong>Standard library:</strong></a> Reference for the functions found in the Rant Standard Library.</li>
<li><a href="/glossary.html"><strong>Glossary:</strong></a> Familiarize yourself with Rant's terminology.</li>
</ul>
<h2><a class="header" href="#other-helpful-resources" id="other-helpful-resources">Other helpful resources</a></h2>
<p>For API documentation, see <a href="https://docs.rs/rant">docs.rs</a>.</p>
<p>For a step-by-step beginner's guide to Rant, see the <a href="https://rant-lang.org/get-started">Getting Started</a> page on the Rant website.</p>
<h1><a class="header" href="#language-features" id="language-features">Language features</a></h1>
<h1><a class="header" href="#text" id="text">Text</a></h1>
<p>In Rant, text is considered as a combination of two types of tokens: <strong>fragments</strong> and <strong>whitespace</strong>.</p>
<p>Any string of text is a valid Rant program.</p>
<h2><a class="header" href="#fragments" id="fragments">Fragments</a></h2>
<p>A <strong>fragment</strong> is defined in Rant as any sequence of characters that:</p>
<ol>
<li>contains no whitespace,</li>
<li>contains no reserved characters (e.g. braces, brackets, etc.)</li>
</ol>
<p>Rant will output any fragment verbatim.</p>
<pre><code class="language-rant"># Prints &quot;Hello&quot;
Hello
</code></pre>
<h2><a class="header" href="#whitespace" id="whitespace">Whitespace</a></h2>
<p>All sequences of whitespace in a Rant program are normalized to a single space by default.</p>
<p>Rant is very selective about the whitespace it prints. By default, whitespace included in a Rant program is only printed if it is between any two of the following:</p>
<ul>
<li>Fragments</li>
<li>Numbers</li>
<li>Getters</li>
<li>Blocks containing any of the above</li>
<li>Blocks that satisfy the aforementioned requirement</li>
</ul>
<p>All other whitespace (including line breaks) is ignored. Escaped whitespace (<code>\t</code>, <code>\s</code>, etc.) are exempt from this rule.</p>
<blockquote>
<p>TODO: Add examples</p>
</blockquote>
<h2><a class="header" href="#hinting" id="hinting">Hinting</a></h2>
<p>Because Rant's whitespace rules are quite strict, it is sometimes necessary to give the compiler additional information about the structure of your output.</p>
<p>This can be achieved by adding <strong>hints</strong> (symbolized by a <code>'</code>) to your code. 
A hint informs the compiler that the next element of code will print to the output, and that the whitespace between it and another printing element should be included.</p>
<p>The following elements are implicitly hinted:</p>
<ul>
<li>Numbers</li>
<li>Variable getters</li>
<li>Blocks containing at least one fragment, number, getter, hinted element, or nested block that meets this requirement</li>
</ul>
<p>The act of a block inheriting a hint from its contents is known as &quot;taking the hint.&quot;</p>
<pre><code class="language-rant"># Implicitly hinted (block contains fragments)
The coin landed on {Heads|Tails}.

# Explicitly hint the function call so the compiler knows it prints something
Your lucky number is '[num:1;100].
</code></pre>
<h2><a class="header" href="#sinking" id="sinking">Sinking</a></h2>
<p>If you want to suppress the output of a code element, you can <strong>sink</strong> it with the <code>_</code> operator.</p>
<p>Sinking an element has the opposite effect of hinting: it will be marked as &quot;non-printing&quot; and any whitespace between it and another non-printing element will also be ignored.</p>
<p>Only fragments and numbers cannot be sinked; the <code>_</code> character will be interpreted as text in such contexts.</p>
<p>Blocks that are sinked cannot take a hint.</p>
<pre><code class="language-rant">{Now you see me...}     # Prints like normal
_{Now you don't.}       # Prints nothing
Goodbye _{cruel} world! # Prints &quot;Goodbye world!&quot;
_Fragment               # Prints &quot;_Fragment&quot;, as fragments cannot be sinked
</code></pre>
<h2><a class="header" href="#string-literals" id="string-literals">String literals</a></h2>
<p>If you want to treat any text as a single fragment, you can wrap it in a string literal using double quotes:</p>
<pre><code class="language-rant">&quot;    This text is indented&quot;
</code></pre>
<p>They even work over several lines:</p>
<pre><code class="language-rant">&quot;This
text
has
several
lines&quot;
</code></pre>
<h1><a class="header" href="#blocks" id="blocks">Blocks</a></h1>
<p>A <strong>block</strong> is a unit of Rant code subdivided into zero or more parts.</p>
<h2><a class="header" href="#syntax" id="syntax">Syntax</a></h2>
<p>A block is defined by a set of braces containing zero or more sections of Rant code separated by vertical pipes (<code>|</code>). Here are a few examples:</p>
<pre><code class="language-rant">{}          # Empty block
{A}         # Block with one element
{A|B}       # Block with multiple elements
</code></pre>
<h2><a class="header" href="#use-cases" id="use-cases">Use cases</a></h2>
<p>Blocks serve several purposes in Rant, ranging from simple element selection to collections and even loops. They can contain any kind of Rant code—even other blocks.</p>
<h3><a class="header" href="#item-selection" id="item-selection">Item selection</a></h3>
<p>In their simplest form, blocks resolve a single element from their body and add it to the output.</p>
<pre><code class="language-rant"># Randomly prints &quot;Heads&quot; or &quot;Tails&quot; with uniform probability
{Heads|Tails}
</code></pre>
<p>By default, blocks select a random element with uniform probability, but the selection strategy can be customized if needed using a <a href="language//runtime/attributes.html#selectors">selector</a>.</p>
<h3><a class="header" href="#collection-generation" id="collection-generation">Collection generation</a></h3>
<p>Blocks can be used to easily generate lists and maps with conditional, repeating, or probabilistic elements.</p>
<pre><code class="language-rant"># Evaluates to (A; B; C) or (A; D; E)
(A) { (B; C) | (D; E) }
</code></pre>
<pre><code class="language-rant"># Evaluates to (1; 2; 3; 4; 5; 6; 7; 8; 9; 10)
[rep:10]{ ([step]) }
</code></pre>
<h3><a class="header" href="#entanglement" id="entanglement">Entanglement</a></h3>
<p>A group of blocks can be &quot;entangled&quot; so that they all coordinate their selections.</p>
<pre><code class="language-rant"># Create a selector and store it in a variable
&lt;$sync = [mksel:one]&gt;
# Both blocks use the `sync` selector, so they're entangled
[sel:&lt;sync&gt;]{Dogs|Cats} say \&quot;[sel:&lt;sync&gt;]{woof|meow}!\&quot;

##
Possible outputs:
- Dogs say &quot;woof!&quot;
- Cats say &quot;meow!&quot;
##
</code></pre>
<h3><a class="header" href="#variable-scope" id="variable-scope">Variable scope</a></h3>
<p>Blocks also act as scopes for local variables. Any variables created inside of a block are destroyed immediately after the block resolves.</p>
<h2><a class="header" href="#restrictions-on-function-bodies-and-dynamic-keys" id="restrictions-on-function-bodies-and-dynamic-keys">Restrictions on function bodies and dynamic keys</a></h2>
<p>Blocks used as function bodies and dynamic accessor keys are &quot;linear&quot; blocks: they can only contain one element and never consume attributes.
Attempting to use a multi-element block in these contexts will cause a compiler error.</p>
<p>This design consideration prevents function calls and accessors from unintentionally consuming attributes unless the user explicitly requests it by adding an inner block.</p>
<h1><a class="header" href="#stored-blocks" id="stored-blocks">Stored Blocks</a></h1>
<p>Blocks can also be stored in variables for later use. To treat a block like a value instead of resolving, you need to prefix it with <code>&lt;&gt;</code> (known as the &quot;defer operator&quot;).
If the block requires a hint or sink, the <code>&lt;&gt;</code> must appear after it.</p>
<pre><code class="language-rant">&lt;$cool-block = &lt;&gt;{Ohhh yeah!}&gt;
</code></pre>
<p>Then you can resolve it later with the <code>[resolve]</code> function:</p>
<pre><code class="language-rant">[resolve: &lt;cool-block&gt;] # &quot;Ohhh yeah!&quot;
</code></pre>
<p>Blocks are similar to closures when used this way, but only in that they contain code you can store and run later. Stored blocks make several guarantees that closures and functions cannot:</p>
<ol>
<li>They never require arguments</li>
<li>They never capture variables</li>
<li>They will always consume attributes</li>
</ol>
<h1><a class="header" href="#functions" id="functions">Functions</a></h1>
<p>Functions contain code that can be executed arbitrarily. The Rant standard library includes several native functions, but you can also define your own.</p>
<h2><a class="header" href="#calling-functions" id="calling-functions">Calling functions</a></h2>
<p>Function calls use the following syntax:</p>
<pre><code class="language-rant"># Function with no arguments
[func-name]

# Function with one argument
[func-name: arg1]

# Function with multiple arguments, delimited by ';'
[func-name: arg1; arg2]
</code></pre>
<h3><a class="header" href="#shadowed-functions-are-still-callable" id="shadowed-functions-are-still-callable">Shadowed functions are still callable</a></h3>
<p>The situation may occasionally arise where you accidentally (or intentionally)
define a non-function variable with the same name as a function from a parent scope (e.g. a stdlib function) 
and then try to call it: </p>
<pre><code class="language-rant">&lt;$rep = &quot;not a function&quot;&gt;
[rep:10] # Wait a sec...
[sep:\n]
{
    # ...
}
</code></pre>
<p>Some people might (understandably) assume that this would crash the program, but this code actually still works!</p>
<p>When this happens, Rant will perform what is known as <strong>function percolation</strong>:
the runtime will search each parent scope up to the global scope until it finds a function with the same name, and then call it as normal.</p>
<p>Function percolation only applies to function calls, so getters will still correctly retrieve the new variable instead of the function.</p>
<h2><a class="header" href="#defining-functions" id="defining-functions">Defining functions</a></h2>
<p>To define a function and assign it to a variable, the syntax is as follows:</p>
<pre><code class="language-rant"># Define a parameterless function named `say-hello` that prints &quot;Hello&quot;
[$say-hello] {
    Hello
}

# Define a function `greet` with parameter `name` that prints a custom greeting
[$greet: name] {
    Hello, &lt;name&gt;!
}

# Define a function `flip-coin` that returns the value of either `heads` and `tails`
[$flip-coin: heads; tails] {
    {&lt;heads&gt;|&lt;tails&gt;}
}
</code></pre>
<h3><a class="header" href="#optional-parameters" id="optional-parameters">Optional parameters</a></h3>
<p>A function parameter can be marked as optional using the <code>?</code> symbol.
When the argument is omitted for an optional parameter, it will default to <code>~</code>.
Please note that any optional parameters must appear after all required parameters, and before any variadic parameter.</p>
<pre><code class="language-rant"># Generates a map for a pet with a name and species (defaults to &quot;dog&quot;)
[$gen-pet: name; species?] {
    @(
        name = &lt;name&gt;|
        species = [alt: &lt;species&gt;; dog]
    )
}
</code></pre>
<h3><a class="header" href="#variadic-parameters" id="variadic-parameters">Variadic parameters</a></h3>
<p>Functions support variadic parameters with the special symbols <code>*</code> and <code>+</code>.</p>
<p>A <code>*</code> parameter is optional and defaults to an empty list, while a <code>+</code> parameter is required and must contain at least one element.</p>
<p>Functions may only have up to one variadic parameter, and it must appear last in the signature.</p>
<pre><code class="language-rant">[$how-many:items*] {
    [len:&lt;items&gt;]
}

[how-many: foo; bar; baz] # Outputs &quot;3&quot;
</code></pre>
<h1><a class="header" href="#closures" id="closures">Closures</a></h1>
<p>It is sometimes necessary to pass a function as a value rather than define it with a name, so that it can be called elsewhere later on.
This can be done using <strong>closures</strong>, which are an implementation of anonymous functions with the ability to &quot;capture&quot; external variables.</p>
<p>Basic closure syntax with no parameters consists of a <code>?</code> symbol inside brackets preceding the function body. </p>
<pre><code class="language-rant"># Creates a closure and places it on the output
[?]{Hello from closure!}
</code></pre>
<h2><a class="header" href="#parameterized-closures" id="parameterized-closures">Parameterized closures</a></h2>
<p>If you want to add parameters to a closure, specify the parameter names as you would with a normal function inside the closure's signature:</p>
<pre><code class="language-rant">[?: param1; param2]{ ... }
</code></pre>
<h2><a class="header" href="#calling-anonymous-functions" id="calling-anonymous-functions">Calling anonymous functions</a></h2>
<p>Calling an anonymous function uses the same syntax as regular function calls, but the function name is replaced by the <code>!</code> symbol followed by an expression that provides the function (or closure) you want to call.</p>
<pre><code class="language-rant"># Define a function that returns a parameterless box
[$get-anon-func] {
    [?]{Hello from anonymous function}
}

[![get-anon-func]]          # &quot;Hello from anonymous function&quot;

# Define a function that returns a box with a single parameter
[$get-greet-func] {
    [?:name]{Hello, &lt;name&gt;!}
}

[![get-greet-func]:Rant]    # &quot;Hello, Rant!&quot;
</code></pre>
<h2><a class="header" href="#behavior-of-captured-variables" id="behavior-of-captured-variables">Behavior of captured variables</a></h2>
<p>As mentioned previously, a closure can access variables defined outside of its body.
When this happens, it &quot;captures&quot; a reference to that variable for use inside the function.
As a result, changes made to a captured variable persist between calls.</p>
<p>Variable capturing can also be used to maintain a persistent state within a closure instance:
even if the original variable falls out of scope, the closure still keeps it alive.</p>
<pre><code class="language-rant"># Create a function with a persistent state
{
    &lt;$foo-num = 1&gt;
    # Define a function [next-foo] in the parent scope
    [$^next-foo] {
        # Modify `foo-num` from inside the function
        foo &lt;$n = &lt;foo-num&gt;; foo-num = [add: &lt;foo-num&gt;; 1]; n&gt;
    }
} # `foo-num` falls out of scope here, but [next-foo] can still access it

# Call [next-foo] multiple times
[rep:4][sep:\n]
{
    [next-foo]
}
##
  Output:

  foo 1
  foo 2
  foo 3
  foo 4
##
</code></pre>
<h2><a class="header" href="#limitations-on-variable-capture" id="limitations-on-variable-capture">Limitations on variable capture</a></h2>
<p>Capturing is currently only supported on variables accessed locally from the function body.
Descoped and explicit global accessors do not capture variables.</p>
<h1><a class="header" href="#argument-spreading" id="argument-spreading">Argument spreading</a></h1>
<p>Argument spreading enables you to deconstruct a list argument into multiple individual arguments.</p>
<p>Rant exposes this functionality through two spread operators: <strong>parametric spread</strong> (<code>*</code>), and <strong>temporal spread</strong> (<code>**</code>).</p>
<h2><a class="header" href="#parametric-spread" id="parametric-spread">Parametric spread</a></h2>
<p>The <strong>parametric spread operator</strong> lets you use a list to pass multiple arguments at once to a single function call.
This operation is referred to in Rant as &quot;parametric spreading&quot; or simply &quot;spreading.&quot;</p>
<p>Spreading is mostly useful for cases where the contents of a list need to be passed to a variadic parameter,
but it will work on any other parameter (required, optional, or variadic).</p>
<p>There are no restrictions on the position of a spread within an argument list;
you can add them to the start, end, middle, or even have multiple spreads sprinkled throughout.
As long as the final argument list meets the requirements of the target function, it &quot;just works.&quot;</p>
<p>Argument spreading is performed by prefixing an argument with <code>*</code>, as seen below:</p>
<pre><code class="language-rant">&lt;$extras = (baz; qux)&gt;
[cat: foo; bar; * &lt;extras&gt;; boo]
# -&gt; [cat: foo; bar; baz; qux; boo]
</code></pre>
<p>Attempting to spread a non-list will simply pass the value as a normal argument.</p>
<h2><a class="header" href="#temporal-spread" id="temporal-spread">Temporal spread</a></h2>
<p>Rant has a second spread operatior, the <strong>temporal spread operator</strong> (<code>**</code>), which behaves differently from a parametric spread.</p>
<p>Instead of spreading across parameters, it spreads across time itself:
the target function is called once <strong>for each value</strong> in the temporally spread list argument (known as a &quot;temporal argument&quot;), passing in the current list item as the argument value.
This essentially turns the function call into a loop.</p>
<p>This is best explained with the following example:</p>
<pre><code class="language-rant"># Simple function that prints tab-separated values with a newline at the end
[%println: cols*] {
    [join: &lt;cols&gt;; \t]\n
}

&lt;%items = (foo; bar; baz)&gt;

NORMAL SPREAD:\n
[println: * &lt;items&gt;]\n
# -&gt; [println: foo; bar; baz]

TEMPORAL SPREAD:\n
[println: ** &lt;items&gt;]\n
# -&gt; [println: foo]
# -&gt; [println: bar]
# -&gt; [println: baz]
</code></pre>
<p>This produces the following output:</p>
<pre><code>NORMAL SPREAD:
foo     bar     baz

TEMPORAL SPREAD:
foo
bar
baz
</code></pre>
<p>As with parametric spreading, using a temporal spread on a non-list argument simply passes it as a regular argument.</p>
<h3><a class="header" href="#multiple-temporal-arguments" id="multiple-temporal-arguments">Multiple temporal arguments</a></h3>
<p>A function call can have more than one temporal argument. When this happens,
Rant will call the function once for each possible combination of values from all temporal arguments.</p>
<p>When iterating through the combinations, Rant will increment the selection for the leftmost temporal argument first. 
When it rolls back over to the first item, the selection of the second temporal argument is incremented, then the third, and so on.
The total number of iterations will be equal to the product of the lengths of all temporal arguments.</p>
<p>The following example demonstrates how this works:</p>
<pre><code class="language-rant"># Print out every combination (disgusting or not) of two lists of seasonings
[cat: **(salt; pepper; sugar); \t; **(cinnamon; cilantro; basil; cloves); \n]
</code></pre>
<p>This produces the following output:</p>
<pre><code>salt    cinnamon
pepper  cinnamon
sugar   cinnamon
salt    cilantro
pepper  cilantro
sugar   cilantro
salt    basil
pepper  basil
sugar   basil
salt    cloves
pepper  cloves
sugar   cloves
</code></pre>
<h3><a class="header" href="#temporal-argument-synchronization" id="temporal-argument-synchronization">Temporal argument synchronization</a></h3>
<p>In some cases it may be desirable to perform an operation only on elements with matching indices from two or more lists (often called a &quot;zip&quot; operation).
Thankfully, this is easy to do with temporal arguments by adding a <strong>label</strong> to the temporal spread operators you want to synchronize.</p>
<p>To add a label to a temporal spread operator, simply add any sequence of alphanumeric characters, understores, and hyphens between the two <code>*</code> characters, like this:</p>
<pre><code class="language-rant">[cat: *a* (1; 2; 3); *a* (A; B; C); \n]
# -&gt; [cat: 1; A; \n]
# -&gt; [cat: 2; B; \n]
# -&gt; [cat: 3; C; \n]
</code></pre>
<p>Doing this produces only 3 iterations:</p>
<pre><code>1A
2B
3C
</code></pre>
<h1><a class="header" href="#function-composition" id="function-composition">Function composition</a></h1>
<p>When function calls are nested inside each other, they can be difficult to read and understand at a glance:</p>
<pre><code class="language-rant">[e: [d: [c: [b: [a: 1]; 2]; 3]; 4]; 5] # Welcome to bracket hell
</code></pre>
<p>An alternative way to write nested function calls is by using iterative (rather than recursive) syntax-- a method known as <strong>function composition</strong>.</p>
<p>By using function composition, the same expression above can be rewritten with only a single pair of brackets:</p>
<pre><code class="language-rant">[a: 1 |&gt; b: 2 |&gt; c: 3 |&gt; d: 4 |&gt; e: 5] # Much more readable!
</code></pre>
<p>In a composed function, the output of one function is fed into the next. By default, the output is inserted as the first argument;
however, this can be changed by passing the <strong>composition value</strong> <code>[]</code> as an argument:</p>
<pre><code class="language-rant">[$get-zipper] {
    {&lt;add&gt;|&lt;sub&gt;}
}

# Pass the output of [get-zipper] as the third argument for [zip]
[get-zipper |&gt; zip: (1; 2; 3); (4; 5; 6); []]
</code></pre>
<p>If the composition value is a <code>function</code>, you can call it directly using an anonymous call:</p>
<pre><code class="language-rant">[$get-math-func] {
    {&lt;add&gt;|&lt;mul&gt;|&lt;sub&gt;|&lt;div&gt;}
}

# Get a random math function and call it, passing in two numbers
[get-math-func |&gt; ![]: 3.0; 2.0]
</code></pre>
<h2><a class="header" href="#behavior-with-temporal-arguments" id="behavior-with-temporal-arguments">Behavior with temporal arguments</a></h2>
<p>Temporal arguments in composed function calls behave differently than those in nested function calls.</p>
<p>To illustrate this, suppose we have a call to <code>[foo]</code> that passes its return value into <code>[bar]</code>.</p>
<p>In the nested scenario, a temporal argument in <code>[foo]</code> will not duplicate the call to <code>[bar]</code>:</p>
<pre><code class="language-rant">[bar: [foo: **(1; 2; 3)]]
# -&gt; [bar: [foo: 1][foo: 2][foo: 3]]
</code></pre>
<p>In the composed scenario, the temporal argument in <code>[foo]</code> duplicates the entire call chain:</p>
<pre><code class="language-rant">[foo: **(1; 2; 3) |&gt; bar]
# -&gt; [bar: [foo: 1]]
# -&gt; [bar: [foo: 2]]
# -&gt; [bar: [foo: 3]]
</code></pre>
<h1><a class="header" href="#keywords" id="keywords">Keywords</a></h1>
<p><strong>Keywords</strong> are reserved tokens starting with <code>@</code> that perform specialized operations,
such as returning from a function or assigning metadata.</p>
<p>See the subsections for details on each keyword type.</p>
<h1><a class="header" href="#return" id="return">@return</a></h1>
<p>The <code>@return</code> charm exits the currently running function and optionally overwrites the function's output with another value.</p>
<p>When <code>@return</code> is used without any expression to its right, it returns the current output:</p>
<pre><code class="language-rant">[%return-output] {
    {foo @return} bar
}

[return-output] # -&gt; foo
</code></pre>
<p>When an expression comes after <code>@return</code> in the same scope, only the value of that expression is returned:</p>
<pre><code class="language-rant">[%return-value] {
    foo @return bar
}

[return-value] # -&gt; bar
</code></pre>
<p>Additionally, you can also return from the program scope itself:</p>
<pre><code class="language-rant">@return foo # -&gt; foo
</code></pre>
<h1><a class="header" href="#continue" id="continue">@continue</a></h1>
<p>The <code>@continue</code> charm exits the current repeater iteration and optionally overwrites the iteration's output with another value.</p>
<p>TODO</p>
<h1><a class="header" href="#break" id="break">@break</a></h1>
<p>The <code>@break</code> charm exits the current repeater and optionally overwrites the current iteration's output with another value.</p>
<p>TODO</p>
<h1><a class="header" href="#weight" id="weight">@weight</a></h1>
<p>The <code>@weight</code> charm assigns a weight value to the block element it is placed within.</p>
<h2><a class="header" href="#usage" id="usage">Usage</a></h2>
<p>When writing a block with randomized selection, you may sometimes want to make some elements more or less likely to be selected.
This is where <code>@weight</code> comes in: by adding the <code>@weight</code> charm to a block element, you can specify the probability of it being selected.</p>
<p>The below snippet demonstrates the effect of block weights by generating a list of 20 random items of different rarities.</p>
<pre><code class="language-rant">[rep:20][sep:\n]
{
    {
        # Larger weights are more likely to be selected
        &quot;boring&quot; @weight 2
        |
        # Unweighted elements have a default weight of 1
        &quot;common&quot;
        |
        # Smaller weights are less likely to be selected
        &quot;uncommon&quot; @weight 0.5
        |
        # Expressions can be used to assign weights dynamically
        &quot;rare&quot; @weight [randf: 0.05; 0.1]
        |
        # Elements with a weight of 0 are never selected.
        # If all elements have weights of 0, the block will not run.
        &quot;unused&quot; @weight 0
    } {herb|fungus|potion|poison|mineral|book}
}
</code></pre>
<p>The output will look something like this:</p>
<pre><code>boring poison
boring fungus
boring poison
boring herb
boring mineral
common poison
boring mineral
boring fungus
common poison
uncommon fungus
common fungus
boring book
common herb
common potion
common herb
boring herb
rare book
uncommon mineral
common potion
common mineral
</code></pre>
<p>As you can see, &quot;boring&quot; and &quot;common&quot; items are by far the most frequently picked, while &quot;uncommon&quot; and &quot;rare&quot; items tend to occur much less frequently; 
&quot;unused&quot; items, on the other hand, never appear due to their weight of 0.</p>
<h3><a class="header" href="#evaluation" id="evaluation">Evaluation</a></h3>
<p>When a weighted block resolves, it evaluates all weights in the order they appear before running any elements.
The weight values are retained until the block finishes resolving. For repeaters, all iterations use the same weights.</p>
<h3><a class="header" href="#valid-weight-values" id="valid-weight-values">Valid weight values</a></h3>
<p>Weight values can be any number (<code>int</code> or <code>float</code>), other &quot;weight-like&quot; value, or an expression that evaluates to one of these;
there are, however, special cases where some values are handled differently:</p>
<ul>
<li>Negative weights are clamped to 0.</li>
<li>Positive infinity, negative infinity, and NaN also default to 0.</li>
<li><code>~</code> produces a weight of 1.</li>
<li><code>true</code> and <code>false</code> produce weights of 1 and 0, respectively.</li>
</ul>
<h2><a class="header" href="#limitations" id="limitations">Limitations</a></h2>
<p>Weights are currently only used by default block selection and will be ignored by custom selectors.</p>
<h1><a class="header" href="#comments" id="comments">Comments</a></h1>
<p>Comments are used to annotate code without affecting its behavior.
This is useful for adding descriptions to your code that offer further explanation of the functionality.</p>
<p>There are two types of comments in Rant: single-line and multi-line.</p>
<h2><a class="header" href="#single-line-comments" id="single-line-comments">Single-line comments</a></h2>
<p>A single-line comment begins with the <code>#</code> character and terminates at the end of the current line.
They do not have to start at the beginning of a line.</p>
<pre><code class="language-rant"># This is a comment
{A|B|C} # This is an inline comment
</code></pre>
<h2><a class="header" href="#multi-line-comments" id="multi-line-comments">Multi-line comments</a></h2>
<p>A multi-line comment can span multiple lines and is enclosed by two <code>#</code> characters on each end:</p>
<pre><code class="language-rant">##
This is
a multi-line
comment
##
</code></pre>
<h1><a class="header" href="#escape-sequences" id="escape-sequences">Escape sequences</a></h1>
<p>It will, of course, be necessary to sometimes print reserved characters, or characters that cannot be typed on a standard keyboard.
To this end, Rant offers escape sequences.</p>
<h2><a class="header" href="#character-escape-sequences" id="character-escape-sequences">Character escape sequences</a></h2>
<p>Any reserved (and most non-reserved) characters can be printed by prefixing each one with a backslash character:</p>
<pre><code class="language-rant">\{This text will print with braces around it\}
</code></pre>
<h2><a class="header" href="#special-escape-sequences" id="special-escape-sequences">Special escape sequences</a></h2>
<p>Certain characters are not interpreted verbatim when escaped, and instead have special meaning.
Here's a list of them:</p>
<table><thead><tr><th>Escape sequence</th><th>Output character</th></tr></thead><tbody>
<tr><td><code>\r</code></td><td>Carriage return (U+000D)</td></tr>
<tr><td><code>\n</code></td><td>Line feed (U+000A)</td></tr>
<tr><td><code>\s</code></td><td>Space (U+0020)</td></tr>
<tr><td><code>\t</code></td><td>Tab (U+0009)</td></tr>
<tr><td><code>\0</code></td><td>Null character (U+0000)</td></tr>
<tr><td><code>\xXX</code></td><td>UTF-8 character code <em>[See below]</em></td></tr>
</tbody></table>
<h2><a class="header" href="#unicode-escape-sequences" id="unicode-escape-sequences">Unicode escape sequences</a></h2>
<p>Escape sequences can also be used to print characters by their Unicode code point in hexadecimal format:</p>
<pre><code class="language-rant">\xE4    # 'ä'
</code></pre>
<h1><a class="header" href="#collections" id="collections">Collections</a></h1>
<p>Rant's variable system has 4 collection types: <code>list</code>, <code>map</code>, <code>string</code>, and <code>range</code>.</p>
<h2><a class="header" href="#list" id="list">List</a></h2>
<p>The <code>list</code> type represents a mutable, resizable, ordered collection of zero or more values.</p>
<p>Lists are initialized using a pair of parentheses containing the list elements, separated by semicolons:</p>
<pre><code class="language-rant"># A pair of parentheses is treated like an empty list
&lt;$empty-list = ()&gt;

# Initialize a list with one empty element
&lt;$one-empty = (~)&gt;

# Create a list with two empty elements
&lt;$two-empty = (;)&gt; # Short for (~;~)

# Create a list of numbers
&lt;$lucky-numbers = (1; 2; 3; 5; 7; 11; 13)&gt;

# Create a list of lists
&lt;$important-lists = ((A; B; C); (D; E; F))&gt;
</code></pre>
<h3><a class="header" href="#list-indexing" id="list-indexing">List indexing</a></h3>
<p>List indices start at 0 and can be accessed by adding the index to the accessor path.</p>
<p>You can also use negative indices to access items relative to the end of a list, starting from -1 and going down.</p>
<pre><code class="language-rant"># Create a list
&lt;$list = (1;2;3;4;5;6;7;8;9)&gt;

# Get first item
&lt;list/0&gt;\n      # 1

# Get second item
&lt;list/1&gt;\n      # 2

# Get last item
&lt;list/-1&gt;\n     # 9

# Get second to last item
&lt;list/-2&gt;\n     # 8

# Change third item from 3 to -3
&lt;list/2 = -3&gt;
&lt;list/2&gt;        # -3
</code></pre>
<h2><a class="header" href="#map" id="map">Map</a></h2>
<p>The <code>map</code> type represents an unordered, mutable, resizable collection of zero or more key-value pairs, where each key is a unique string.</p>
<p>Map keys are always coerced to strings; if you try to access a map using a non-string key, the key will be automatically coerced to a string before use.</p>
<p>Maps use similar syntax to lists, but with some extra requirements:</p>
<ul>
<li>The <code>@</code> symbol must appear before the opening <code>(</code> to identify the collection as a map.</li>
<li>Each element must be a key-value pair, with the key and value separated by an <code>=</code> symbol.</li>
</ul>
<p>Map keys come in two flavors:</p>
<ul>
<li><strong>Static keys:</strong> Evaluated at compile-time. They must be identifiers or string literals.</li>
<li><strong>Dynamic keys:</strong> Evaluated at run-time. They must be blocks.</li>
</ul>
<pre><code class="language-rant"># Create an empty map
&lt;$empty-map = @()&gt;

# Create a map with various value types
&lt;$secret-key = occupation&gt;
&lt;$person = @(
    name = John;
    age = 25;
    &quot;favorite color&quot; = {red|green|blue};
    {&lt;secret-key&gt;} = programmer
)&gt;
</code></pre>
<h2><a class="header" href="#range" id="range">Range</a></h2>
<p>The <code>range</code> type represents a linear series of integers parameterized by three values:</p>
<ol>
<li>an inclusive <strong>start</strong> bound,</li>
<li>an exclusive <strong>end</strong> bound,</li>
<li>the <strong>interval</strong> between values in the range.</li>
</ol>
<p>As such, very large ranges can be stored, indexed, and enumerated without needing to pre-allocate all possible values in memory.</p>
<p>Ranges are created with the built-in <code>[range]</code> function:</p>
<pre><code class="language-rant"># Print numbers 0 through 4
[cat: **[range: 0; 5]; \n]

##
  Output:
  0
  1
  2
  3
  4
##
</code></pre>
<p>Backwards ranges are possible, too; just use a start bound larger than the end bound:</p>
<pre><code class="language-rant"># Print numbers 4 through 0
[cat: **[range: 4; -1]; \n]

##
  Output:
  4
  3
  2
  1
  0
##
</code></pre>
<p>By default, <code>[range]</code> uses an interval of 1, but you can change this by adding a third argument:</p>
<pre><code class="language-rant"># Print every second number between 0 and 9
[cat: **[range: 0; 10; 2]; \n]

##
  Output:
  0
  2
  4
  6
  8
##
</code></pre>
<h2><a class="header" href="#retrieving-values-from-collections" id="retrieving-values-from-collections">Retrieving values from collections</a></h2>
<p>Variable accessors can access individual elements in lists and maps by using the access operator <code>/</code>.</p>
<pre><code class="language-rant">&lt;$person = @(
    name = Bob;
    age = 30;
    hobbies = (programming;hiking)
)&gt;

name = &lt;person/name&gt;\n
age = &lt;person/age&gt;\n
hobbies = [join: &lt;person/hobbies&gt;; ,\s]

##
    Output:

    name = Bob
    age = 30
    hobbies = programming, hiking
##
</code></pre>
<p>Additionally, a variable access path does not need to be made out of entirely constants. You can use a block to resolve to a key or index.</p>
<p><strong>Map example</strong></p>
<pre><code class="language-rant">&lt;$my-map = @(
    a = foo; b = bar; c = baz
)&gt;

&lt;my-map/{{a|b|c}}&gt;
# Outputs &quot;foo&quot;, &quot;bar&quot;, or &quot;baz&quot;
</code></pre>
<p><strong>List example</strong></p>
<pre><code class="language-rant">&lt;$my-list = (foo;bar;baz)&gt;

&lt;my-list/0&gt;             # &quot;foo&quot;
&lt;my-list/1&gt;             # &quot;bar&quot;
&lt;my-list/2&gt;             # &quot;baz&quot;
&lt;my-list/{[rand:0;2]}&gt;   # &quot;foo&quot;, &quot;bar&quot;, or &quot;baz&quot;
</code></pre>
<h2><a class="header" href="#supported-operations" id="supported-operations">Supported operations</a></h2>
<p>Some collections can be mutated (modified), while others are read-only. Some can be sliced but not spliced. 
Below is a breakdown of which operations each collection type supports:</p>
<table><thead><tr><th align="center">Type</th><th align="center">Read</th><th align="center">Write</th><th align="center">Slice</th><th align="center">Splice</th></tr></thead><tbody>
<tr><td align="center"><code>list</code></td><td align="center">🟢</td><td align="center">🟢</td><td align="center">🟢</td><td align="center">🟢</td></tr>
<tr><td align="center"><code>map</code></td><td align="center">🟢</td><td align="center">🟢</td><td align="center">🔴</td><td align="center">🔴</td></tr>
<tr><td align="center"><code>string</code></td><td align="center">🟢</td><td align="center">🔴</td><td align="center">🟢</td><td align="center">🔴</td></tr>
<tr><td align="center"><code>range</code></td><td align="center">🟢</td><td align="center">🔴</td><td align="center">🟢</td><td align="center">🔴</td></tr>
</tbody></table>
<p></p>
<table><thead><tr><th align="center">Legend</th></tr></thead><tbody>
<tr><td align="center">🟢 = supported; 🔴 = not supported</td></tr>
</tbody></table>
<h2><a class="header" href="#collection-auto-concatenation" id="collection-auto-concatenation">Collection auto-concatenation</a></h2>
<p>Multiple collections of the same type are automatically concatenated or merged when printed alone in the same sequence.
This significantly reduces the amount of boilerplate required when generating collections with varying amount of elements, or elements that are conditionally included.</p>
<h3><a class="header" href="#examples" id="examples">Examples</a></h3>
<pre><code class="language-rant"># List auto-concatenation
[assert-eq: (A)(B); (A; B)]
</code></pre>
<pre><code class="language-rant"># Probabilistic list generation
&lt;%strange-list = { (A; B) | (C; D) } { (E; F) | (G; H) }&gt;
##
&lt;strange-list&gt; will be one of:
  * (A; B; E; F)
  * (A; B; G; H)
  * (C; D; E; F)
  * (C; D; G; H)
##
</code></pre>
<pre><code class="language-rant"># Automatically combine two maps
&lt;%data = 
    @(
        foo = 1
    )
    @(
        bar = 2
    )
&gt;

[assert-eq: &lt;data/foo?&gt;; 1]
[assert-eq: &lt;data/bar?&gt;; 2]
</code></pre>
<h1><a class="header" href="#accessors" id="accessors">Accessors</a></h1>
<p><strong>Accessors</strong> are the central means of reading and writing variable data in Rant.
Accessors are contained within a pair of angle brackets (<code>&lt; &gt;</code>).</p>
<p>They have several uses:</p>
<ul>
<li>defining new variables</li>
<li>getting/setting variable values</li>
<li>accessing elements in collections</li>
</ul>
<p>Accessors have three subtypes: <strong>definitions</strong>, <strong>setters</strong>, and <strong>getters</strong>.</p>
<h2><a class="header" href="#definitions" id="definitions">Definitions</a></h2>
<p>A <strong>definition</strong> creates a new variable in the current scope.
They are denoted by placing a <code>$</code> symbol before the variable name.</p>
<p>It is optional to assign a value in a definition.
You can leave the assignment part out and it will be initialized to the empty value (<code>~</code>).</p>
<pre><code class="language-rant"># Define a variable `name` but leave it empty (value is `~`)
&lt;$name&gt;

# Define a variable `name` and assign it the string &quot;Nick&quot;
&lt;$name = Nick&gt;
</code></pre>
<h2><a class="header" href="#setters" id="setters">Setters</a></h2>
<p>A <strong>setter</strong> modifies an existing variable or value.</p>
<pre><code class="language-rant"># Define a variable
&lt;$name = Bob&gt;
# Overwrite value on existing variable `name`
&lt;name = Susan&gt;
</code></pre>
<p>Along with setting variables, setters can also write to specific elements of collections.</p>
<pre><code class="language-rant">&lt;$numbers = (1; 2; 3)&gt;
&lt;numbers/0 = 4&gt; # list is now (4; 2; 3)
</code></pre>
<h2><a class="header" href="#getters" id="getters">Getters</a></h2>
<p>A <strong>getter</strong> retrieves some value and prints it to the output.</p>
<p>Attempting to retrieve a variable that does not exist causes a runtime error.</p>
<pre><code class="language-rant"># Get value of `name` (note the lack of '$')
&lt;$name = Robin&gt;
My name is &lt;name&gt;.\n # Prints &quot;My name is Robin.&quot;
</code></pre>
<h2><a class="header" href="#multi-part-accessors" id="multi-part-accessors">Multi-part accessors</a></h2>
<p>To aid readability, Rant also allows you to place several access operations in a single accessor block.
Simply end each operation with a semicolon; the final semicolon is optional and may be omitted.</p>
<pre><code class="language-rant">&lt;$first-name = John; $last-name = Smith; $full-name = &lt;first-name&gt;\s&lt;last-name&gt;;&gt;
</code></pre>
<h2><a class="header" href="#variable-scope-1" id="variable-scope-1">Variable scope</a></h2>
<p>Variables only live as long as the expression or block in which they are defined.</p>
<p>Blocks, function arguments, setter expressions, dynamic keys, and function bodies are all examples of variable scopes.
As soon as a scope is finished running, all variables defined within it are discarded.</p>
<h3><a class="header" href="#child-scopes" id="child-scopes">Child scopes</a></h3>
<p>Child scopes inherit variables from parent scopes. In addition, they may define their own variables.</p>
<pre><code class="language-rant">{
    &lt;$a = 1&gt;
    {
        &lt;$b = 2&gt;
        [add: &lt;a&gt;; &lt;b&gt;] # Outputs &quot;3&quot;
    }
}
</code></pre>
<h3><a class="header" href="#shadowing" id="shadowing">Shadowing</a></h3>
<p>Variables in a parent scope can be temporarily hidden (&quot;shadowed&quot;) by defining a variable of the same name in a child scope.</p>
<p>When the child variable goes out of scope, the shadowed parent variable will once again become accessible.</p>
<pre><code class="language-rant"># Define variable `a` in parent scope
&lt;$a = foo&gt;
a is &lt;a&gt;\n
{
    # Define another variable `a` in child scope
    # Parent variable is not affected
    &lt;$a = bar&gt;
    a is &lt;a&gt;\n
}
# Parent variable takes over after child scope exits
a is &lt;a&gt;

##
    Output:

    a is foo
    a is bar
    a is foo
##
</code></pre>
<h2><a class="header" href="#constants" id="constants">Constants</a></h2>
<p>Constants are much like variables in that they are scoped the same way and store a value.
Unlike variables, however, constants are immutable: they can only be assigned within a definition, and cannot be redefined.</p>
<p>The syntax to define a constant is simple: where variable definitions use <code>$</code>, constant definitions use <code>%</code>:</p>
<pre><code class="language-rant"># Variable definition
&lt;$mutable-value = 123&gt;

# Constant definition
&lt;%constant-value = 123&gt;


&lt;mutable-value = 456&gt;   # works as expected
&lt;constant-value = 456&gt;  # error
</code></pre>
<p>Constants can still be shadowed by child scopes.</p>
<pre><code class="language-rant">&lt;%foo = 123&gt;
{
    &lt;$foo = 456&gt;    # this is valid since we're not reassigning ^foo
}
</code></pre>
<h3><a class="header" href="#by-ref-constants-have-interior-mutability" id="by-ref-constants-have-interior-mutability">By-ref constants have interior mutability</a></h3>
<p>Storing a by-ref type, such as a list or map, in a constant does not prevent its contents from being changed; 
it only guarantees that the reference stored by the constant cannot change.</p>
<pre><code class="language-rant"># Create a constant list
&lt;%special-list = (1; 2; 3)&gt;

# Modifying the contents is still allowed
[push: &lt;special-list&gt;; 4]   # list now contains (1; 2; 3; 4)

# Swapping out the list itself is not allowed
&lt;special-list = (7; 8; 9)&gt;  # error!
</code></pre>
<h1><a class="header" href="#collection-access" id="collection-access">Collection Access</a></h1>
<p>An accessor can operate on specific elements of collections (lists, maps, strings, and ranges) using an <strong>access path</strong>.</p>
<p>An access path is made up of one or more <strong>access path components</strong>, of which there are several types: <strong>indices</strong>, <strong>keys</strong>, <strong>dynamic keys</strong>, and <strong>slices</strong>.
These are separated by the path separator token <code>/</code>.</p>
<h2><a class="header" href="#indexing" id="indexing">Indexing</a></h2>
<p>Accessing elements in ordered collections (lists, strings, and ranges) is known as <strong>indexing</strong>.
All Rant collections use &quot;zero-based indexing&quot;; in other words, the first element starts at index 0, the second at index 1, and so on.</p>
<pre><code class="language-rant">&lt;%numbers = (1; 3; 5; 7; 9)&gt;

# Set the first number to 1
&lt;numbers/0 = 100&gt;

# Get the first number
&lt;numbers/0&gt; # -&gt; 100
</code></pre>
<p>Negative indices are relative to the end of the collection. This means <code>-1</code> represents the last element, <code>-2</code> the penultimate element, and so on.</p>
<pre><code class="language-rant">&lt;%msg = &quot;hello&quot;&gt;
Last char: &lt;msg/-1&gt;\n # same as &lt;msg/4&gt; or &lt;msg/{[sub: [len: &lt;msg&gt;]; 1]}&gt;

# Last char: o
</code></pre>
<h2><a class="header" href="#keying" id="keying">Keying</a></h2>
<p>Accessing elements in maps is known as <strong>keying</strong>. 
Simply specify the desired map key after the <code>/</code> to access the map element with that key:</p>
<pre><code class="language-rant">&lt;%citizen = @(
    name = &quot;Steve&quot;;
    age = 50;
    mood = &quot;angry&quot;;
)&gt;

# Set &lt;citizen/age&gt; to 150
&lt;citizen/age = 150&gt;

&lt;citizen/name&gt;\n    # -&gt; Steve
&lt;citizen/age&gt;\n     # -&gt; 150
&lt;citizen/mood&gt;\n    # -&gt; angry
</code></pre>
<p>Keys follow the same naming rules as variables, unless specified as a dynamic key (see below).</p>
<h2><a class="header" href="#dynamic-keys" id="dynamic-keys">Dynamic keys</a></h2>
<p>Where an index or key must be calculated at runtime, a dynamic key may be used. Dynamic keys are single-element blocks that returns an <code>int</code> or <code>string</code>.</p>
<pre><code class="language-rant">&lt;%fruits = (apple; orange; banana; tomato)&gt;

&lt;fruits/{ [len: &lt;fruits&gt; |&gt; sub: 1 |&gt; rand: 0; []] }&gt; # returns a random fruit
</code></pre>
<p>The value of a dynamic key must be compatible with the type of collection being accessed: for example, a <code>string</code> cannot be used to index a <code>list</code>, but an <code>int</code> can be used to key a <code>map</code> because its conversion to a string is infallible (in other words, all <code>int</code> values have a valid <code>string</code> conversion).</p>
<h3><a class="header" href="#dynamic-key-type-compatibility" id="dynamic-key-type-compatibility">Dynamic key type compatibility</a></h3>
<table><thead><tr><th align="center">Collection type</th><th align="center">Key is <code>string</code></th><th align="center">Key is <code>int</code></th></tr></thead><tbody>
<tr><td align="center"><code>list</code></td><td align="center">🔴</td><td align="center">🟢</td></tr>
<tr><td align="center"><code>range</code></td><td align="center">🔴</td><td align="center">🟢</td></tr>
<tr><td align="center"><code>string</code></td><td align="center">🔴</td><td align="center">🟢</td></tr>
<tr><td align="center"><code>map</code></td><td align="center">🟢</td><td align="center">🟠</td></tr>
</tbody></table>
<p></p>
<table><thead><tr><th align="center">Legend</th></tr></thead><tbody>
<tr><td align="center">🟢 = valid; 🟠 = coerced; 🔴 = invalid</td></tr>
</tbody></table>
<h2><a class="header" href="#slicing" id="slicing">Slicing</a></h2>
<p>Accessing a contiguous range of elements in an ordered collection is known as <strong>slicing</strong>. 
Slices can be fully-bounded (having start + end points), half-bounded (having a start or end point but not both), or unbounded (all elements).</p>
<p>When you get a slice of a collection, the accessor returns a new copy of the collection containing the slice contents.</p>
<p>Slice notation takes the following forms:</p>
<pre><code class="language-rant"># fully-bounded
&lt;my-list/2:5&gt;   # get all elements between index 2 (inclusive) and index 5 (exclusive)

# start-bounded
&lt;my-list/2:&gt;    # get all emements starting at index 2 (inclusive)

# end-bounded
&lt;my-list/:5&gt;    # get all elements until index 5 (exclusive)

# unbounded
&lt;my-list/:&gt;     # get all elements (equivalent to a shallow-clone)
</code></pre>
<h4><a class="header" href="#splicing" id="splicing">Splicing</a></h4>
<p>You can also set a slice on mutable collection types, an operation also known as <strong>splicing</strong>:</p>
<pre><code class="language-rant">&lt;$my-list = (1; 2; 3)&gt;
&lt;my-list/1:2 = (a; b)&gt; # the splice doesn't have to be the same size!
&lt;my-list&gt; # -&gt; (1; a; b; 3)
</code></pre>
<h4><a class="header" href="#dynamic-slices" id="dynamic-slices">Dynamic slices</a></h4>
<p>Slices also support dynamic bounds; just replace any slice bound index with a single-element block that returns an <code>int</code> value.</p>
<pre><code class="language-rant">&lt;%message = &quot;fantastic&quot;&gt;
[rep: [len: &lt;message&gt;]]
{
    # Use the current repeater step to slice the message
    &lt;message/:{[step]}&gt;\n
}
</code></pre>
<p>This produces the following output:</p>
<pre><code>f 
fa
fan
fant
fanta
fantas
fantast
fantasti
fantastic
</code></pre>
<h2><a class="header" href="#nested-access-paths" id="nested-access-paths">Nested access paths</a></h2>
<p>Access paths can be nested. This means if you have an array in a map and you want to access an element of that array, you most certainly can; just add another component to the path.</p>
<pre><code class="language-rant">&lt;%arrays = @(
    odd-numbers = (1; 3; 5; 7; 9);
    even-numbers = (0; 2; 4; 6; 8);
)&gt;

# Get the last element of &lt;arrays/odd-numbers&gt;
&lt;arrays/odd-numbers/-1&gt;
</code></pre>
<h1><a class="header" href="#anonymous-accessors" id="anonymous-accessors">Anonymous Accessors</a></h1>
<p>In order to access a key or index on a value, it normally must be stored in a variable; 
however, <strong>anonymous accessors</strong> remove this requirement by accepting a raw value instead of a variable name.</p>
<p>To create an anonymous accessor, replace the variable name in the accessor with <code>!</code> followed by a single expression 
(block, collection, accessor, function call, etc.) and write the rest of your access path as normal.</p>
<p>Both getters and setters can be made anonymous; however, anonymous setters must include at least one index or key.</p>
<h3><a class="header" href="#example-1" id="example-1">Example 1</a></h3>
<pre><code class="language-rant"># Create two lists
&lt;$list1 = (1;2;3;4;5;6;7;8)&gt;
&lt;$list2 = (a;b;c;d;e;f;g;h)&gt;

# Create a function that returns one of two lists
[$get-either-list]{{&lt;list1&gt;|&lt;list2&gt;}}

# Call [get-random-list] and get the 4th item (index 3) of the returned list
&lt;![get-either-list]/3&gt; # Returns either '4' or 'd'
</code></pre>
<h3><a class="header" href="#example-2" id="example-2">Example 2</a></h3>
<pre><code class="language-rant"># Get the first letter of a string literal
&lt;!&quot;hello&quot;/0&gt; # Returns 'h'
</code></pre>
<h1><a class="header" href="#fallbacks" id="fallbacks">Fallbacks</a></h1>
<p>A <strong>fallback</strong>, (or <strong>fallback expression</strong>) is an optional component of a getter that can return a default value if the getter fails (such as due to a missing variable, index, or key).</p>
<p>A fallback expression only runs if the data requested by the associated getter is not found; otherwise, it is ignored completely.</p>
<p>To use a fallback, it must be added to the end of the accessor, within the brackets, with a leading <code>?</code> character as shown below.</p>
<h3><a class="header" href="#example" id="example">Example</a></h3>
<pre><code class="language-rant"># Store a value to use as a fallback
&lt;$fallback = &quot;I don't exist!&quot;&gt;

{
    # Define a variable `foo`
    &lt;$foo = &quot;I exist!&quot;&gt;

    # Get `foo` with fallback
    &lt;foo ? &lt;fallback&gt;&gt; # -&gt; &quot;I exist!&quot;
}\n

# Getting `foo` again out of scope will trigger the fallback
&lt;foo ? &lt;fallback&gt;&gt; # -&gt; &quot;I don't exist!&quot;

# Getting `foo` without a fallback here would crash the program
&lt;foo&gt; # error
</code></pre>
<h1><a class="header" href="#globals--descoping" id="globals--descoping">Globals &amp; Descoping</a></h1>
<p>Accessors support two ways of explicitly accessing variables in parent scopes: <strong>global accessors</strong> and <strong>descoping</strong>.</p>
<h2><a class="header" href="#explicitly-accessing-globals" id="explicitly-accessing-globals">Explicitly accessing globals</a></h2>
<p>The top level of a Rant program implicitly defines a local variable scope; 
because of this, top-level variables will only persist for the duration of the program.</p>
<p>To explicitly access a variable in the global scope, prefix the path with the <code>/</code> character.</p>
<p>Similarly to the descope operator, this method also allows you to override shadowing on globals.</p>
<pre><code class="language-rant">&lt;$foo = Hello from program scope!&gt;
&lt;$/foo = Hello from global scope!&gt;

Local: &lt;foo&gt;\n
Global: &lt;/foo&gt;\n

##
    Output:

    Local: Hello from program scope!
    Global: Hello from global scope!
##
</code></pre>
<h2><a class="header" href="#the-descope-operator" id="the-descope-operator">The 'descope' operator</a></h2>
<p>If a child scope shadows a parent variable and you want to access the parent variable explicitly, you can use the <strong>descope operator</strong>.</p>
<p>To do this, prefix the variable name with a <code>^</code> character.</p>
<pre><code class="language-rant">&lt;$a = foo&gt;
{
    &lt;$a = bar&gt;
    Shadowed: &lt;a&gt;\n
    Descoped: &lt;^a&gt;\n
}

##
    Output:

    Shadowed: bar
    Descoped: foo
##
</code></pre>
<p>Adding more than one <code>^</code> character in a row will skip up to that many scopes.
These operations are called &quot;<em>n</em>-descopes&quot;, where <em>n</em> is the number of scopes skipped:
For example, <code>&lt;^^foo&gt;</code> is a 2-descope, <code>&lt;^^^foo&gt;</code> is a 3-descope, and so on.</p>
<pre><code class="language-rant"># Define `test`
&lt;$test = foo&gt;
{
    # Shadow `test`
    &lt;$test = bar&gt;
    {
        # Shadow `test` again
        &lt;$test = baz&gt;
        &lt;^^test&gt; &lt;^test&gt; &lt;test&gt;
    }
}
## Output: &quot;foo bar baz&quot;
</code></pre>
<p>While the compiler imposes no explicit limit on descope depth, use cases for large descope depths are rare and it is recommended to avoid them when possible.</p>
<pre><code class="language-rant"># An example of a 360-descope.
&lt;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
foo&gt;
</code></pre>
<h1><a class="header" href="#variables--data-types" id="variables--data-types">Variables &amp; Data Types</a></h1>
<p>Variables enable you to store and retrieve values.</p>
<p>Rant is a dynamically-typed language, which means that variables don't have to contain a specific type;
for example, you can initialize a variable with an integer, and later change it to a string (and vice versa).</p>
<p>Rant has the following data types:</p>
<table><thead><tr><th>Type name</th><th>Description</th><th>Pass type</th></tr></thead><tbody>
<tr><td><code>string</code></td><td>Sequence of UTF-8 characters</td><td>by-value</td></tr>
<tr><td><code>int</code></td><td>64-bit signed integer</td><td>by-value</td></tr>
<tr><td><code>float</code></td><td>64-bit double-precision float</td><td>by-value</td></tr>
<tr><td><code>bool</code></td><td>Boolean value</td><td>by-value</td></tr>
<tr><td><code>range</code></td><td>Indexable range of integers with optional interval</td><td>by-value</td></tr>
<tr><td><code>empty</code></td><td>Unit type representing &quot;null&quot; value</td><td>by-value</td></tr>
<tr><td><code>function</code></td><td>Function/closure</td><td>by-ref</td></tr>
<tr><td><code>list</code></td><td>List of values</td><td>by-ref</td></tr>
<tr><td><code>map</code></td><td>String-keyed collection of values</td><td>by-ref</td></tr>
<tr><td><code>block</code></td><td>Stored block</td><td>by-ref</td></tr>
<tr><td><code>special</code></td><td>Handle to internal runtime data, such as a selector</td><td>by-ref</td></tr>
</tbody></table>
<h2><a class="header" href="#the-empty-type" id="the-empty-type">The <code>empty</code> type</a></h2>
<p>To represent the lack of a value, Rant has the <code>empty</code> type, which has only one possible value, represented by the token <code>~</code>.</p>
<pre><code class="language-rant">&lt;$nothing = ~&gt;    # i.e. &lt;$nothing&gt;
[type:&lt;nothing&gt;]  # empty
</code></pre>
<h2><a class="header" href="#the-bool-type" id="the-bool-type">The <code>bool</code> type</a></h2>
<p>The two boolean values are represented by the keywords <code>true</code> and <code>false</code>.
These keywords can still be used as fragments when not used alone, as their string representations are simply <code>&quot;true&quot;</code> and <code>&quot;false&quot;</code>;
however, if they are passed on their own and need to be strings, you will need to use a string literal.</p>
<h2><a class="header" href="#type-inference-for-expressions" id="type-inference-for-expressions">Type inference for expressions</a></h2>
<p>In order to resolve type ambiguities, Rant makes a few basic assumptions:</p>
<h3><a class="header" href="#integers" id="integers">Integers</a></h3>
<p>Any number token without a decimal place becomes an <code>int</code>.</p>
<pre><code class="language-rant">[type:123]  # int
</code></pre>
<h3><a class="header" href="#floats" id="floats">Floats</a></h3>
<p>Any number token with a decimal place becomes a <code>float</code>.</p>
<pre><code class="language-rant">[type:123.0]  # float
</code></pre>
<h3><a class="header" href="#top-level-text" id="top-level-text">Top-level text</a></h3>
<p>Any expression containing top-level text (i.e. not in a collection) evaluates to a string.</p>
<p>Whitespace at the start or end of an expression is ignored.</p>
<pre><code class="language-rant"># Since there are fragments and whitespace, it's a string
[type:99 bottles of beer]  # string

# Since there is whitespace between the numbers, the value is still a string
[type:99 99]  # string
</code></pre>
<h3><a class="header" href="#multiple-values-in-a-sequence" id="multiple-values-in-a-sequence">Multiple values in a sequence</a></h3>
<p>A sequence will evaluate to a string if the following are true:</p>
<ol>
<li>There are multiple values in the expression</li>
<li>At least one value is non-empty</li>
<li>The sequence is not all lists or all maps</li>
</ol>
<p>When these conditions are met, all values printed by the sequences are converted to their string representations and concatenated.</p>
<pre><code class="language-rant"># Even though they are all integer tokens, they are treated as text
[type:10 20 30 40 50]  # string
</code></pre>
<h4><a class="header" href="#multiple-lists" id="multiple-lists">Multiple lists</a></h4>
<p>A sequence that is entirely made of lists will return a single list containing the concatenation of the input lists.</p>
<pre><code class="language-rant">(1; 2) (3; 4) # same as (1; 2; 3; 4)
</code></pre>
<p>This rule also applies when the sequence contains any expression that returns a list:</p>
<pre><code class="language-rant">[rep:10] {
    ([step])
}
# returns (1; 2; 3; 4; 5; 6; 7; 8; 9; 10)
</code></pre>
<h4><a class="header" href="#multiple-maps" id="multiple-maps">Multiple maps</a></h4>
<p>A sequence that is entirely made of maps will return a single map containing the key/value pairs of the input maps. 
Duplicate keys are overwritten by newer values.</p>
<pre><code class="language-rant">&lt;%my-map = 
    @(a = 1)
    @(b = 2)
&gt;
# returns @(a = 1; b = 2)
</code></pre>
<p>As with list sequences, this also applies with expressions that return maps:</p>
<pre><code class="language-rant">[rep:3]{
    @( {item_[step]} = [step] )
}
# returns @(item_1 = 1; item_2 = 2; item_3 = 3)
</code></pre>
<h4><a class="header" href="#empties" id="empties">Empties</a></h4>
<p>Expressions containing only empties evaluate to the empty value.</p>
<p>Expressions containing nothing also evaluate to the empty value.</p>
<pre><code class="language-rant">[type:~~]       # empty
[type:~]        # empty
[type:]         # empty
</code></pre>
<h1><a class="header" href="#runtime-features" id="runtime-features">Runtime features</a></h1>
<p>This section deals with features specific to the Rant runtime.</p>
<h1><a class="header" href="#attributes" id="attributes">Attributes</a></h1>
<p><strong>Attributes</strong> are special runtime settings that modify block behavior, such as how many times a block repeats or how it selects which element to run.</p>
<p>Attributes are set by calling the standard library's <strong>attribute functions</strong> and stored in the program's <strong>attribute stack</strong>.
Each frame of the attribute stack stores a full set of attributes.</p>
<p>When a block resolves, it consumes attributes from the topmost attribute frame and replaces them with their default values.</p>
<p>Frames can be added to and removed from the attribute stack using <code>[push-attrs]</code> and <code>[pop-attrs]</code>.</p>
<h2><a class="header" href="#repetitions" id="repetitions">Repetitions</a></h2>
<p>By setting the repetitions attribute, you can control how many times the next encountered block will run.
This attribute is set with the <code>[rep]</code> function.</p>
<h3><a class="header" href="#example-1" id="example-1">Example</a></h3>
<pre><code class="language-rant">[rep:10]{[step]\n}
# Output:
# 1
# 2
# 3
# 4
# 5
# 6
# 7
# 8
# 9
# 10
</code></pre>
<h2><a class="header" href="#separator" id="separator">Separator</a></h2>
<p>The separator attribute controls what is printed between each block repetition.
It is set using the <code>[sep]</code> function.</p>
<h3><a class="header" href="#example-2" id="example-2">Example</a></h3>
<pre><code class="language-rant">[rep:4][sep:&quot; and &quot;]
It just keeps {going}...

# Output:
# It just keeps going and going and going and going...
</code></pre>
<h2><a class="header" href="#selector" id="selector">Selector</a></h2>
<p>The selector attribute controls how Rant chooses which branch of a block to take. It does this using a special state machine object, which must be created separately but can be shared between blocks to coordinate their behavior.</p>
<h3><a class="header" href="#example-3" id="example-3">Example</a></h3>
<pre><code class="language-rant"># Print every element of the block in a random order with no duplicates

&lt;$s=[mksel:deck]&gt;  # Create a &quot;deck&quot; selector
[sel:&lt;s&gt;]          # Apply the selector
[rep:all]          # Set repetitions
[sep:,\s]          # Set separator
{A|B|C|D|E|F|G|H}

# Output
# F, C, E, G, B, H, D, A
</code></pre>
<h2><a class="header" href="#pipe" id="pipe">Pipe</a></h2>
<p>The pipe attribute allows the user to supply a function (known as the &quot;pipe function&quot;) that is called in place of each iteration of the block.
The pipe function accepts the current block element as a callback parameter, which it can then call to produce output for that iteration.</p>
<p>This is extremely useful for applying filters or post-processing to a block at a per-iteration level.</p>
<pre><code class="language-rant">[rep: all]
[sep: \n]
[pipe: [?:elem] { [elem]! }] # Just adds an exclamation point
[mksel: forward |&gt; sel]
{
    One | Two | Three | Four | Five | Six | Seven | Eight | Nine | Ten
}
</code></pre>
<h1><a class="header" href="#formatters" id="formatters">Formatters</a></h1>
<p>Rant can passively apply various filters to program output.</p>
<p>The following formatters are currently supported:</p>
<ul>
<li>Capitalization</li>
<li>Numbers</li>
<li>Whitespace normalization</li>
</ul>
<h1><a class="header" href="#case-formatter" id="case-formatter">Case formatter</a></h1>
<p>The <strong>case formatter</strong> can automatically adjust capitalization of output text according to a variety of filter presets.</p>
<h1><a class="header" href="#number-formatter" id="number-formatter">Number formatter</a></h1>
<p>The <strong>number formatter</strong> enables Rant to convert numeric values (<code>int</code> and <code>float</code>) to localized strings in the program output.</p>
<p>TODO</p>
<h1><a class="header" href="#whitespace-formatter" id="whitespace-formatter">Whitespace formatter</a></h1>
<p>The <strong>whitespace formatter</strong> controls how Rant normalizes printable whitespace found in programs.</p>
<h1><a class="header" href="#modules" id="modules">Modules</a></h1>
<p>Rant supports basic dependency management via a <strong>module</strong> system.
Modules are libraries of Rant functions that you can write and load into other Rant programs for use. Each module resides in its own source file.</p>
<h2><a class="header" href="#writing-modules" id="writing-modules">Writing modules</a></h2>
<p>A module is simply a Rant program that returns a map containing the module's contents. Similar to a regular Rant program, modules are expected have the <code>.rant</code> file extension.</p>
<p>Below is a basic example of a very simple module:</p>
<pre><code class="language-rant"># lol.rant: Laughter Generation Module

&lt;$module = @()&gt;

[$module/cackle: len?] {
  [rep:[alt:&lt;len&gt;;2]]{h{a|e|ee|ue|aa|o}}!!!
}

&lt;module&gt;
</code></pre>
<h2><a class="header" href="#importing-and-using-modules" id="importing-and-using-modules">Importing and using modules</a></h2>
<p>A module can be imported using the <code>[require]</code> function.
For this example, we'll import the <code>lol</code> module previously shown.</p>
<pre><code class="language-rant"># Looks for `lol.rant` and imports it as map variable `lol`.
# You don't need to specify the file extension.
[require: lol]

# Call the `[cackle]` function from the module
[lol/cackle: 16]
# --&gt; haahoheehehehuehohoheehahohaaheehoheehaa!!!
</code></pre>
<p>Imported modules are cached by the Rant context running the program.
If you import the same module twice, it will be fetched from cache.</p>
<h3><a class="header" href="#compiler-errors-in-modules" id="compiler-errors-in-modules">Compiler errors in modules</a></h3>
<p>Rant needs to compile modules before they can be imported. If a module fails to compile, a runtime error will be triggered with the compiler error list.</p>
<h2><a class="header" href="#where-rant-looks-for-modules" id="where-rant-looks-for-modules">Where Rant looks for modules</a></h2>
<p>When you run <code>[require]</code>, Rant looks for the module in the following locations in-order:</p>
<ol>
<li>The requesting program's file location
<ul>
<li>Skipped if the program was not loaded from a file</li>
</ul>
</li>
<li>The <strong>local modules path</strong>
<ul>
<li>Defaults to the current working directory, but the host app can reconfigure it</li>
</ul>
</li>
<li>The <strong>global modules path</strong>
<ul>
<li>Set by the <code>RANT_MODULES_PATH</code> environment variable</li>
<li>Can be disabled by the host app</li>
</ul>
</li>
</ol>
<p>If Rant cannot locate a module with a matching path and name, 
it will trigger a runtime error.</p>
<h3><a class="header" href="#relative-paths-in-require" id="relative-paths-in-require">Relative paths in <code>[require]</code></a></h3>
<p>The <code>[require]</code> function can also accept a relative path to a module.
This makes it possible to access modules in subfolders of any of the module search locations.</p>
<p>For example, if your application has a <code>rant_modules</code> subfolder in its main directory, you can import modules from it like this:</p>
<pre><code class="language-rant"># Imports `my-module`
[require:rant_modules/my-module]
</code></pre>
<h1><a class="header" href="#if-elseif-else" id="if-elseif-else">@if, @elseif, @else</a></h1>
<blockquote>
<p><strong>This is a feature proposal.</strong> It is currently being considered for inclusion, or in the process of being implemented.</p>
</blockquote>
<p>The keywords <code>@if</code>, <code>@elseif</code>, and <code>@else</code> are used to construct conditional expressions.</p>
<h1><a class="header" href="#is-keywords" id="is-keywords">@is* keywords</a></h1>
<blockquote>
<p><strong>This is a feature proposal.</strong> It is currently being considered for inclusion, or in the process of being implemented.</p>
</blockquote>
<p>Blocks can be used to perform various boolean operations by prefixing them with any of several special @is-keywords. Each element of the attached block acts as a separate operand.</p>
<h2><a class="header" href="#short-circuiting" id="short-circuiting">Short-circuiting</a></h2>
<p>Some operations are &quot;short-circuiting&quot;-- meaning that Rant may not evaluate all of the expressions in the block if the result can be determined early. For example, if the first operand of a short-circuiting AND operation evaluates to false, we know that the result will be false, so we can skip evaluating the rest of the operands.</p>
<h2><a class="header" href="#eagerness" id="eagerness">Eagerness</a></h2>
<p>The <code>@each</code> modifier keyword can be placed after the <code>@is*</code> keyword to disable short-circuiting; this behavior is known as &quot;eager evaluation.&quot;</p>
<h2><a class="header" href="#isany" id="isany">@isany</a></h2>
<p>The <code>@isany</code> keyword creates a short-circuiting boolean OR expression.</p>
<h3><a class="header" href="#truth-table" id="truth-table">Truth table</a></h3>
<table><thead><tr><th><code>@isany {A | B}</code></th><th align="center"><code>A = true</code></th><th align="center"><code>A = false</code></th></tr></thead><tbody>
<tr><td><strong><code>B = true</code></strong></td><td align="center"><code>true</code></td><td align="center"><code>true</code></td></tr>
<tr><td><strong><code>B = false</code></strong></td><td align="center"><code>true</code></td><td align="center"><code>false</code></td></tr>
</tbody></table>
<h2><a class="header" href="#isall" id="isall">@isall</a></h2>
<p>The <code>@isall</code> keyword creates a short-circuiting boolean AND expression.
Its complement is <code>@isntall</code>.</p>
<h3><a class="header" href="#truth-table-1" id="truth-table-1">Truth table</a></h3>
<table><thead><tr><th><code>@isall {A | B}</code></th><th align="center"><code>A = true</code></th><th align="center"><code>A = false</code></th></tr></thead><tbody>
<tr><td><strong><code>B = true</code></strong></td><td align="center"><code>true</code></td><td align="center"><code>false</code></td></tr>
<tr><td><strong><code>B = false</code></strong></td><td align="center"><code>false</code></td><td align="center"><code>false</code></td></tr>
</tbody></table>
<h2><a class="header" href="#isntall" id="isntall">@isntall</a></h2>
<p>The <code>@isntall</code> keyword creates a short-circuiting boolean NAND expression.</p>
<h3><a class="header" href="#truth-table-2" id="truth-table-2">Truth table</a></h3>
<table><thead><tr><th><code>@isntall {A | B}</code></th><th align="center"><code>A = true</code></th><th align="center"><code>A = false</code></th></tr></thead><tbody>
<tr><td><strong><code>B = true</code></strong></td><td align="center"><code>false</code></td><td align="center"><code>true</code></td></tr>
<tr><td><strong><code>B = false</code></strong></td><td align="center"><code>true</code></td><td align="center"><code>true</code></td></tr>
</tbody></table>
<h2><a class="header" href="#isnone" id="isnone">@isnone</a></h2>
<p>The <code>@isnone</code> keyword creates a short-circuiting boolean NOR expression.
Its complement is <code>@isany</code>.</p>
<h3><a class="header" href="#truth-table-3" id="truth-table-3">Truth table</a></h3>
<table><thead><tr><th><code>@isnone {A | B}</code></th><th align="center"><code>A = true</code></th><th align="center"><code>A = false</code></th></tr></thead><tbody>
<tr><td><strong><code>B = true</code></strong></td><td align="center"><code>false</code></td><td align="center"><code>false</code></td></tr>
<tr><td><strong><code>B = false</code></strong></td><td align="center"><code>false</code></td><td align="center"><code>true</code></td></tr>
</tbody></table>
<h2><a class="header" href="#isone" id="isone">@isone</a></h2>
<p>The <code>@isone</code> keyword creates a short-circuiting boolean XOR expression.</p>
<h3><a class="header" href="#truth-table-4" id="truth-table-4">Truth table</a></h3>
<table><thead><tr><th><code>@isone {A | B}</code></th><th align="center"><code>A = true</code></th><th align="center"><code>A = false</code></th></tr></thead><tbody>
<tr><td><strong><code>B = true</code></strong></td><td align="center"><code>false</code></td><td align="center"><code>true</code></td></tr>
<tr><td><strong><code>B = false</code></strong></td><td align="center"><code>true</code></td><td align="center"><code>false</code></td></tr>
</tbody></table>
<h2><a class="header" href="#ismany" id="ismany">@ismany</a></h2>
<p>The <code>@ismany</code> keyword creates a short-circuiting expression that evaluates to <code>true</code> if more than one of the operands evaluates to <code>true</code>; otherwise, it evaluates to <code>false</code>.</p>
<h3><a class="header" href="#truth-table-5" id="truth-table-5">Truth table</a></h3>
<table><thead><tr><th><code>@ismany {A | B | C}</code></th><th align="center"><code>A = true</code></th><th align="center"><code>A = false</code></th></tr></thead><tbody>
<tr><td><strong><code>B = false, C = false</code></strong></td><td align="center"><code>false</code></td><td align="center"><code>false</code></td></tr>
<tr><td><strong><code>B = true, C = false</code></strong></td><td align="center"><code>true</code></td><td align="center"><code>false</code></td></tr>
<tr><td><strong><code>B = false, C = true</code></strong></td><td align="center"><code>true</code></td><td align="center"><code>false</code></td></tr>
<tr><td><strong><code>B = true, C = true</code></strong></td><td align="center"><code>true</code></td><td align="center"><code>true</code></td></tr>
</tbody></table>
<h2><a class="header" href="#issame" id="issame">@issame</a></h2>
<p>The <code>@issame</code> keyword creates a short-circuiting equality expression.
Its complement is <code>@isdiff</code>.</p>
<p>Although the truth table shows boolean inputs, this operation accepts all types.</p>
<h3><a class="header" href="#truth-table-6" id="truth-table-6">Truth table</a></h3>
<table><thead><tr><th><code>@issame {A | B | C}</code></th><th align="center"><code>A = true</code></th><th align="center"><code>A = false</code></th></tr></thead><tbody>
<tr><td><strong><code>B = false, C = false</code></strong></td><td align="center"><code>false</code></td><td align="center"><code>true</code></td></tr>
<tr><td><strong><code>B = true, C = false</code></strong></td><td align="center"><code>false</code></td><td align="center"><code>false</code></td></tr>
<tr><td><strong><code>B = false, C = true</code></strong></td><td align="center"><code>false</code></td><td align="center"><code>false</code></td></tr>
<tr><td><strong><code>B = true, C = true</code></strong></td><td align="center"><code>true</code></td><td align="center"><code>false</code></td></tr>
</tbody></table>
<h2><a class="header" href="#isdiff" id="isdiff">@isdiff</a></h2>
<p>The <code>@isdiff</code> keyword creates a short-circuiting inequality expression.
Its complement is <code>@issame</code>.</p>
<p>Although the truth table shows boolean inputs, this operation accepts all types.</p>
<h3><a class="header" href="#truth-table-7" id="truth-table-7">Truth table</a></h3>
<table><thead><tr><th><code>@isdiff {A | B | C}</code></th><th align="center"><code>A = true</code></th><th align="center"><code>A = false</code></th></tr></thead><tbody>
<tr><td><strong><code>B = false, C = false</code></strong></td><td align="center"><code>true</code></td><td align="center"><code>false</code></td></tr>
<tr><td><strong><code>B = true, C = false</code></strong></td><td align="center"><code>true</code></td><td align="center"><code>true</code></td></tr>
<tr><td><strong><code>B = false, C = true</code></strong></td><td align="center"><code>true</code></td><td align="center"><code>true</code></td></tr>
<tr><td><strong><code>B = true, C = true</code></strong></td><td align="center"><code>false</code></td><td align="center"><code>true</code></td></tr>
</tbody></table>
<h1><a class="header" href="#rant-standard-library" id="rant-standard-library">Rant Standard Library</a></h1>
<p>The Rant Standard Library contains many useful and some essential functions that are natively implemented in the Rant runtime itself.</p>
<h2><a class="header" href="#categories" id="categories">Categories</a></h2>
<p>Below is a list of broad categories that standard library features fall under:</p>
<h4><a class="header" href="#a-hrefstdlibgeneralhtmlgeneral-functionsa" id="a-hrefstdlibgeneralhtmlgeneral-functionsa"><a href="./stdlib/general.html">General functions</a></a></h4>
<p>Functions which fall under no specific category or are widely useful go here.</p>
<h4><a class="header" href="#a-hrefstdlibcontrol-flowhtmlattributecontrol-flow-functionsa" id="a-hrefstdlibcontrol-flowhtmlattributecontrol-flow-functionsa"><a href="./stdlib/control-flow.html">Attribute/Control flow functions</a></a></h4>
<p>Functions for performing conditional branching, setting attributes, and other forms of control flow.</p>
<h4><a class="header" href="#a-hrefstdlibcollectionshtmlcollection-functionsa" id="a-hrefstdlibcollectionshtmlcollection-functionsa"><a href="./stdlib/collections.html">Collection functions</a></a></h4>
<p>Functions that read from, manipulate, or create new collections.</p>
<h4><a class="header" href="#a-hrefstdlibgeneratorshtmlgenerator-functionsa" id="a-hrefstdlibgeneratorshtmlgenerator-functionsa"><a href="./stdlib/generators.html">Generator functions</a></a></h4>
<p>Functions for generating various types of values, often using randomization.</p>
<h4><a class="header" href="#a-hrefstdlibformattinghtmlformatting-functionsa" id="a-hrefstdlibformattinghtmlformatting-functionsa"><a href="./stdlib/formatting.html">Formatting functions</a></a></h4>
<p>Functions for changing the output formatting.</p>
<h4><a class="header" href="#a-hrefstdlibstringshtmlstring-functionsa" id="a-hrefstdlibstringshtmlstring-functionsa"><a href="./stdlib/strings.html">String functions</a></a></h4>
<p>Functions for working with strings.</p>
<h4><a class="header" href="#a-hrefstdlibbooleanhtmlboolean-functionsa" id="a-hrefstdlibbooleanhtmlboolean-functionsa"><a href="./stdlib/boolean.html">Boolean functions</a></a></h4>
<p>Functions for performing boolean algebra.</p>
<h4><a class="header" href="#a-hrefstdlibcomparisonhtmlcomparison-functionsa" id="a-hrefstdlibcomparisonhtmlcomparison-functionsa"><a href="./stdlib/comparison.html">Comparison functions</a></a></h4>
<p>Functions for comparing values to each other.</p>
<h4><a class="header" href="#a-hrefstdlibcomparisonhtmlmath-functionsa" id="a-hrefstdlibcomparisonhtmlmath-functionsa"><a href="./stdlib/comparison.html">Math functions</a></a></h4>
<p>Various arithmetic functions.</p>
<h4><a class="header" href="#a-hrefstdlibconversionhtmlconversion-functionsa" id="a-hrefstdlibconversionhtmlconversion-functionsa"><a href="./stdlib/conversion.html">Conversion functions</a></a></h4>
<p>Functions for converting values to other types.</p>
<h4><a class="header" href="#a-hrefstdlibverificationhtmlverification-functionsa" id="a-hrefstdlibverificationhtmlverification-functionsa"><a href="./stdlib/verification.html">Verification functions</a></a></h4>
<p>Functions for testing values against various criteria.</p>
<h3><a class="header" href="#a-hrefstdlibassertionhtmlassertion-functionsa" id="a-hrefstdlibassertionhtmlassertion-functionsa"><a href="./stdlib/assertion.html">Assertion functions</a></a></h3>
<p>Functions for verifying program state and function output.</p>
<h4><a class="header" href="#a-hrefstdlibconstantshtmlconstantsa" id="a-hrefstdlibconstantshtmlconstantsa"><a href="./stdlib/constants.html">Constants</a></a></h4>
<p>Special constant values, such as the language version in use.</p>
<h1><a class="header" href="#standard-library-general-functions" id="standard-library-general-functions">Standard Library: General functions</a></h1>
<h3><a class="header" href="#alt-a-b" id="alt-a-b">[alt: a; b+]</a></h3>
<p>→ <code>any</code> or <code>empty</code></p>
<p>Prints the first argument that isn't the empty value <code>~</code>. If all arguments are <code>~</code>, prints <code>~</code>.</p>
<h3><a class="header" href="#call-func-args" id="call-func-args">[call: func; args]</a></h3>
<p>→ <code>any</code> or <code>empty</code></p>
<p>Calls the function <code>func</code> with the argument list <code>args</code>.</p>
<h4><a class="header" href="#errors" id="errors">Errors</a></h4>
<p>Causes a runtime error if either of the following are true:</p>
<ul>
<li><code>func</code> isn't a function</li>
<li><code>args</code> isn't a list</li>
</ul>
<h3><a class="header" href="#cat-values" id="cat-values">[cat: values*]</a></h3>
<p>→ <code>any*</code></p>
<p>Prints the provided arguments in order.</p>
<h3><a class="header" href="#copy-value" id="copy-value">[copy: value]</a></h3>
<p>→ <code>any</code></p>
<p>Returns a shallow clone of <code>value</code>.</p>
<h3><a class="header" href="#either-condition-true-val-false-val" id="either-condition-true-val-false-val">[either: condition; true-val; false-val]</a></h3>
<p>→ <code>any</code></p>
<p>Returns <code>true-val</code> if <code>condition</code> is <code>true</code>, or <code>false-val</code> if <code>condition</code> is <code>false</code>.</p>
<p><code>condition</code> must be of type <code>bool</code>.</p>
<h3><a class="header" href="#irange-a-b-step" id="irange-a-b-step">[irange: a; b?; step?]</a></h3>
<p>→ <code>range</code></p>
<p>Creates a new <strong>inclusive</strong> <code>range</code> with the specified bounds and step value.</p>
<ul>
<li>If <code>a</code> and <code>b</code> are present, range will start at <code>a</code> (inclusive) and end at <code>b</code> (inclusive).</li>
<li>If <code>a</code> is present but <code>b</code> is omitted, range will start at 0 (inclusive) and end at <code>a</code> (inclusive).</li>
</ul>
<p>The <code>step</code> value determines the spacing of the range values and must be a positive integer. A step value of 0 defaults to 1.</p>
<p>The <code>step</code> value does not affect the first value in the range and is only applied on subsequent values.</p>
<h3><a class="header" href="#fork-seed" id="fork-seed">[fork: seed?]</a></h3>
<p>Forks (overrides) the current RNG with a new RNG seeded by both the old RNG's seed and the specified seed.
If no seed is provided, a random one is generated.</p>
<p>The seed value must be an <code>int</code> or <code>string</code>.</p>
<h4><a class="header" href="#errors-1" id="errors-1">Errors</a></h4>
<p>Causes a runtime error if <code>seed</code> is neither an <code>int</code> nor <code>string</code>.</p>
<h4><a class="header" href="#example-4" id="example-4">Example</a></h4>
<pre><code class="language-rant"># Entangles {yee|woo} with {haw|hoo}, i.e. forces them both to pick the same index

[fork:a]{yee|woo}[unfork]-
[fork:a]{haw|hoo}[unfork]!

# Output is either &quot;yee-haw!&quot; or &quot;woo-hoo!&quot;
</code></pre>
<h3><a class="header" href="#nop-args" id="nop-args">[nop: args*]</a></h3>
<p>Does absolutely nothing. Intended as a convenience function for use as a default/placeholder callback.</p>
<h3><a class="header" href="#range-a-b-step" id="range-a-b-step">[range: a; b?; step?]</a></h3>
<p>→ <code>range</code></p>
<p>Creates a new <strong>exclusive</strong> <code>range</code> with the specified bounds and step value.</p>
<ul>
<li>If <code>a</code> and <code>b</code> are present, range will start at <code>a</code> (inclusive) and end at <code>b</code> (exclusive).</li>
<li>If <code>a</code> is present but <code>b</code> is omitted, range will start at 0 (inclusive) and end at <code>a</code> (exclusive).</li>
</ul>
<p>The <code>step</code> value determines the spacing of the range values and must be a positive integer. A step value of 0 defaults to 1.</p>
<p>The <code>step</code> value does not affect the first value in the range and is only applied on subsequent values.</p>
<h3><a class="header" href="#require-module-path" id="require-module-path">[require: module-path]</a></h3>
<p>Imports the module at the specified relative path and assigns it to a local variable with a name matching the file name.</p>
<p>Rant requires module files to have the <code>.rant</code> extension in order to load them; as such, it is not necessary to supply the file extension in the path.</p>
<h4><a class="header" href="#example-5" id="example-5">Example</a></h4>
<pre><code class="language-rant"># Import module `my-module`
[require: my-module]

# Call `hello-world` function in `my-module`
[my-module/hello-world]
</code></pre>
<h3><a class="header" href="#resolve-block" id="resolve-block">[resolve: block]</a></h3>
<p>→ <code>any</code> or <code>empty</code></p>
<p>Resolves the specified block.</p>
<h4><a class="header" href="#errors-2" id="errors-2">Errors</a></h4>
<p>Causes a runtime error if the provided value is not a block.</p>
<h3><a class="header" href="#seed" id="seed">[seed]</a></h3>
<p>→ <code>int</code></p>
<p>Returns the seed value of the currently active runtime RNG.</p>
<h3><a class="header" href="#type-value" id="type-value">[type: value]</a></h3>
<p>→ <code>string</code></p>
<p>Returns the name of <code>value</code>'s type. The type name can be any of the following:</p>
<ul>
<li><code>string</code></li>
<li><code>float</code></li>
<li><code>int</code></li>
<li><code>bool</code></li>
<li><code>function</code></li>
<li><code>list</code></li>
<li><code>map</code></li>
<li><code>special</code></li>
<li><code>empty</code></li>
</ul>
<h3><a class="header" href="#unfork" id="unfork">[unfork]</a></h3>
<p>Removes the last RNG created by <code>[fork]</code> and resumes use of the previous RNG.</p>
<h1><a class="header" href="#standard-library-attributes--control-flow" id="standard-library-attributes--control-flow">Standard Library: Attributes &amp; Control flow</a></h1>
<h3><a class="header" href="#count-attrs" id="count-attrs">[count-attrs]</a></h3>
<p>→ <code>int</code></p>
<p>Prints the current size of the attribute frame stack.</p>
<h3><a class="header" href="#else" id="else">[else]</a></h3>
<p>Marks the next block as conditional and causes it to resolve iff the last block was conditional and its condition evaluated to false.</p>
<h3><a class="header" href="#else-if-condition" id="else-if-condition">[else-if: condition]</a></h3>
<p>Marks the next block as conditional and causes it to resolve iff the following are true:</p>
<ul>
<li><code>condition</code> is true</li>
<li>The last block was conditional and its condition evaluated to false</li>
</ul>
<h3><a class="header" href="#if-condition" id="if-condition">[if: condition]</a></h3>
<p>Marks the next block as conditional and causes it to resolve iff <code>condition</code> is true.</p>
<h3><a class="header" href="#mksel-selector-mode" id="mksel-selector-mode">[mksel: selector-mode]</a></h3>
<p>→ <code>special</code></p>
<p>Creates and returns a selector with the specified mode.</p>
<h3><a class="header" href="#selector-modes" id="selector-modes">Selector modes</a></h3>
<table><thead><tr><th>Mode name</th><th>Description</th></tr></thead><tbody>
<tr><td><code>random</code></td><td>Selects a random element each time.</td></tr>
<tr><td><code>one</code></td><td>Selects the same, random element each time.</td></tr>
<tr><td><code>forward</code></td><td>Selects in a wrapping sequence from first to last.</td></tr>
<tr><td><code>reverse</code></td><td>Selects in a wrapping reverse sequence from last to first.</td></tr>
<tr><td><code>deck</code></td><td>Selects each element once in a random sequence, then reshuffles.</td></tr>
<tr><td><code>deck-loop</code></td><td>Selects each element once in a wrapping random sequence, without reshuffling.</td></tr>
<tr><td><code>deck-clamp</code></td><td>Selects each element once in a random sequence, repeating the final element.</td></tr>
<tr><td><code>forward-clamp</code></td><td>Selects from first to last, then repeats the last element.</td></tr>
<tr><td><code>reverse-clamp</code></td><td>Selects from last to first, then repeats the first element.</td></tr>
<tr><td><code>ping</code></td><td>Selects from first to last, switching directions when a boundary is reached.</td></tr>
<tr><td><code>pong</code></td><td>Selects from last to first, switching directions when a boundary is reached.</td></tr>
<tr><td><code>no-double</code></td><td>Selects a random element each time, ensuring the same element never repeats twice in a row.</td></tr>
</tbody></table>
<h3><a class="header" href="#pipe-pipe-func" id="pipe-pipe-func">[pipe: pipe-func]</a></h3>
<p>Sets the pipe function for the next block.</p>
<p>The function passed to <code>pipe-func</code> must accept a single parameter (the element callback) in order to run properly.</p>
<h3><a class="header" href="#push-attrs" id="push-attrs">[push-attrs]</a></h3>
<p>Pushes a new attribute frame onto the attribute frame stack, overriding the previous one.</p>
<h3><a class="header" href="#pop-attrs" id="pop-attrs">[pop-attrs]</a></h3>
<p>Removes the topmost attribute frame from the attribute frame stack, handing control back to the previous one.</p>
<h4><a class="header" href="#errors-3" id="errors-3">Errors</a></h4>
<p>Popping the last attribute frame results in a runtime error.</p>
<h3><a class="header" href="#rep-reps" id="rep-reps">[rep: reps]</a></h3>
<p>Sets the repetition count for the next block to <code>reps</code>.
The value of <code>reps</code> must either be a non-negative <code>int</code> or one of the special modes listed below.</p>
<h3><a class="header" href="#special-rep-modes" id="special-rep-modes">Special rep modes</a></h3>
<table><thead><tr><th>Mode name</th><th>Description</th></tr></thead><tbody>
<tr><td><code>once</code></td><td>Run the block only once. (default behavior)</td></tr>
<tr><td><code>forever</code></td><td>Repeat the next block until explicitly stopped.</td></tr>
<tr><td><code>all</code></td><td>Repeat as many times as there are elements in the  next block.</td></tr>
</tbody></table>
<h4><a class="header" href="#examples-1" id="examples-1">Examples</a></h4>
<pre><code class="language-rant"># Print the fragment 3 times
[rep:3]{ha}
# hahaha
</code></pre>
<pre><code class="language-rant"># Print the fragment between 3 and 8 times
[rep:[num:3;8]]{ha}
# hahahaha
# hahahahahahaha
# hahaha
# hahahahaha
# ...
</code></pre>
<h3><a class="header" href="#sel-selector" id="sel-selector">[sel: selector]</a></h3>
<p>Sets the selector for the next block. </p>
<p>The <code>selector</code> parameter can accept either a selector state object created via <code>[mksel]</code>, or a selector mode string (see <code>[mksel]</code> documentation for available modes).</p>
<h4><a class="header" href="#examples-2" id="examples-2">Examples</a></h4>
<pre><code class="language-rant"># Pass in an existing selector object so its state persists between uses
&lt;%fwd = [mksel:forward]&gt;
[sel:&lt;fwd&gt;]
[rep:all]
[sep:\s]
{
  A | B | C | D
}
</code></pre>
<pre><code class="language-rant"># Create a temporary selector using [mksel]
[sel:[mksel:forward]]
[rep:all]
[sep:\s]
{
  A | B | C | D
}
</code></pre>
<pre><code class="language-rant"># Automatically create a temporary selector from a mode name
[sel:forward]
[rep:all]
[sep:\s]
{
  A | B | C | D
}
</code></pre>
<h3><a class="header" href="#sep-separator" id="sep-separator">[sep: separator]</a></h3>
<p>Sets the separator value for the next block to <code>separator</code>.
The value of <code>separator</code> may be a string, number, or function.
If it is a function, it will be called separately for each usage and its return value will be printed.</p>
<h4><a class="header" href="#examples-3" id="examples-3">Examples</a></h4>
<pre><code class="language-rant"># Print comma-separated list of numbers 1-10
[rep:10][sep:,\s]{[step]}

##
  Output:
  1, 2, 3, 4, 5, 6, 7, 8, 9, 10
##
</code></pre>
<pre><code class="language-rant"># Print list of numbers 1-10 separated by random sequence of spaces and newlines
[rep:10][sep:*{\n|\s}]{[step]}

##
  Output:
  1 2 3
  4 5 6 7 8
  9
  10
##
</code></pre>
<h1><a class="header" href="#standard-library-collection-functions" id="standard-library-collection-functions">Standard Library: Collection functions</a></h1>
<h3><a class="header" href="#assoc-keys-values" id="assoc-keys-values">[assoc: keys; values]</a></h3>
<p>→ <code>map</code></p>
<p>Creates a map from a list of keys and a list of values.
Each key in <code>keys</code> will be matched with the value at the same index in <code>values</code>.</p>
<p>Raises a runtime error if the lists are not the same length.</p>
<h4><a class="header" href="#example-6" id="example-6">Example</a></h4>
<pre><code class="language-rant"># Generate a map of the &quot;Big Five&quot; personality traits
# with random rating values that add up to 50
&lt;$personality = 
  [assoc:
    (ope; con; ext; agr; neu);
    [shred: 50; 5; [rand: 1; 10]] # Use random variance to reduce trait deviation
  ]
&gt;

# Print the values
[whitespace-fmt:verbatim]
&quot;Openness to experience:&quot;   &lt;personality/ope&gt;\n
&quot;Conscientiousness:&quot;        &lt;personality/con&gt;\n
&quot;Extraversion:&quot;             &lt;personality/ext&gt;\n
&quot;Agreeableness:&quot;            &lt;personality/agr&gt;\n
&quot;Neuroticism:&quot;              &lt;personality/neu&gt;\n


##
  EXAMPLE OUTPUT:

  Openness to experience:   7
  Conscientiousness:        11
  Extraversion:             5
  Agreeableness:            12
  Neuroticism:              15
##
</code></pre>
<h3><a class="header" href="#clear-collection" id="clear-collection">[clear: collection]</a></h3>
<p>Removes all elements from a list or map.</p>
<h4><a class="header" href="#errors-4" id="errors-4">Errors</a></h4>
<p>Causes a runtime error if <code>collection</code> is not a list or map.</p>
<h3><a class="header" href="#collect-values" id="collect-values">[collect: values*]</a></h3>
<p>→ <code>list</code></p>
<p>Returns a <code>list</code> containing the arguments.</p>
<h3><a class="header" href="#filter-list-predicate" id="filter-list-predicate">[filter: list; predicate]</a></h3>
<p>→ <code>list</code></p>
<p>Runs a predicate function against all items in a list and returns another list containing only the values that the predicate returned <code>true</code> on.</p>
<p>The predicate function must accept a single parameter and return a <code>bool</code> value.</p>
<h4><a class="header" href="#examples-4" id="examples-4">Examples</a></h4>
<h5><a class="header" href="#filter-a-list-of-numbers-by-only-those-divisible-by-3" id="filter-a-list-of-numbers-by-only-those-divisible-by-3">Filter a list of numbers by only those divisible by 3</a></h5>
<pre><code class="language-rant">&lt;$numbers = (1; 2; 3; 4; 5; 6; 7; 8; 9; 10; 11; 12)&gt;
&lt;$multiples-of-three = [filter: &lt;numbers&gt;; [?:x] { [is-factor: &lt;x&gt;; 3] }]&gt;
[join: ,\s; &lt;multiples-of-three&gt;]
# -&gt; 3, 6, 9, 12
</code></pre>
<h5><a class="header" href="#filter-a-list-of-numbers-by-only-odd-numbers" id="filter-a-list-of-numbers-by-only-odd-numbers">Filter a list of numbers by only odd numbers</a></h5>
<pre><code class="language-rant">&lt;$numbers = (1; 2; 3; 4; 5; 6; 7; 8; 9; 10; 11; 12)&gt;
# `is-odd` is a function, so we can simply pass it in as the predicate!
&lt;$odd-numbers = [filter: &lt;numbers&gt;; &lt;is-odd&gt;]&gt;
[join: ,\s; &lt;odd-numbers&gt;]
# -&gt; 1, 3, 5, 7, 9, 11
</code></pre>
<h5><a class="header" href="#filter-a-list-of-words-to-only-those-that-are-3-letters-or-less" id="filter-a-list-of-words-to-only-those-that-are-3-letters-or-less">Filter a list of words to only those that are 3 letters or less</a></h5>
<pre><code class="language-rant">&lt;$words = [split: &quot;the quick brown fox jumps over the lazy dog&quot;;\s]&gt;
&lt;$short-words = [filter: &lt;words&gt;; [?:word] { [le: [len: &lt;word&gt;]; 3] }]&gt;
[join: \s; &lt;short-words&gt;]
# -&gt; the fox the dog
</code></pre>
<h3><a class="header" href="#index-of-list-element" id="index-of-list-element">[index-of: list; element]</a></h3>
<p>→ <code>int</code> or <code>empty</code></p>
<p>Returns the index of the first occurrence of <code>element</code> in <code>list</code>.
If no match is found, returns <code>~</code>.</p>
<h4><a class="header" href="#examples-5" id="examples-5">Examples</a></h4>
<pre><code class="language-rant">&lt;$letters = (A; A; B; C; C; D; E)&gt;
[index-of: &lt;letters&gt;; A |&gt; assert-eq: 0]
[index-of: &lt;letters&gt;; C |&gt; assert-eq: 3]
[index-of: &lt;letters&gt;; E |&gt; assert-eq: 6]
[index-of: &lt;letters&gt;; F |&gt; assert-eq: ~]
</code></pre>
<h3><a class="header" href="#join-separator-list" id="join-separator-list">[join: separator; list]</a></h3>
<p>→ <code>any*</code></p>
<p>Prints the elements of a list in order separated by the <code>separator</code> value.</p>
<h3><a class="header" href="#last-index-of-list-element" id="last-index-of-list-element">[last-index-of: list; element]</a></h3>
<p>→ <code>any</code></p>
<p>Returns the index of the last occurrence of <code>element</code> in <code>list</code>.
If no match is found, returns <code>~</code>.</p>
<pre><code class="language-rant">&lt;$letters = (A; A; B; C; C; D; E)&gt;
[last-index-of: &lt;letters&gt;; A |&gt; assert-eq: 1]
[last-index-of: &lt;letters&gt;; C |&gt; assert-eq: 4]
[last-index-of: &lt;letters&gt;; E |&gt; assert-eq: 6]
[last-index-of: &lt;letters&gt;; F |&gt; assert-eq: ~]
</code></pre>
<h3><a class="header" href="#map-list-map-func" id="map-list-map-func">[map: list; map-func]</a></h3>
<p>→ <code>list</code></p>
<p>Applies a function to each item in a list and returns another list with the results in the same order.</p>
<p>The predicate function must accept a single parameter, but can return anything.</p>
<h4><a class="header" href="#example-7" id="example-7">Example</a></h4>
<pre><code class="language-rant"># Multiple each element of a list by 10
&lt;$numbers = (1; 2; 3; 4; 5; 6; 7; 8; 9; 10)&gt;
&lt;$tens = [map: &lt;numbers&gt;; [?:x] { [mul: &lt;x&gt;; 10] }]&gt;
[join: ,\s; &lt;tens&gt;]
# -&gt; 10, 20, 30, 40, 50, 60, 70, 80, 90, 100
</code></pre>
<h3><a class="header" href="#oxford-join-comma-conj-comma-conj-list" id="oxford-join-comma-conj-comma-conj-list">[oxford-join: comma; conj; comma-conj; list]</a></h3>
<p>→ <code>any*</code></p>
<p>A variant of the <code>join</code> function for conveniently formatting comma-separated lists.</p>
<p>Three distinct separator values are required:</p>
<ul>
<li><code>comma</code>: the <strong>comma</strong> value, which separates items except for the last two</li>
<li><code>conj</code>: the <strong>conjunction</strong> value, which is only used to separate items in pairs (lists of 2)</li>
<li><code>comma-conj</code>: the <strong>comma-conjunction</strong> value, which separates the final two values</li>
</ul>
<p>These arguments can be used to configure several aspects of list formatting-- namely, the inclusion of 
the <a href="https://en.wikipedia.org/wiki/Serial_comma">Oxford comma</a> or the choice of conjunction separating the final two items.</p>
<p>The separator values are applied as follows:</p>
<ul>
<li><strong>Lists of 1 item</strong> use no separators.</li>
<li><strong>Lists of 2 items</strong> use <code>conj</code> to separate the two items.</li>
<li><strong>Lists of 3 or more items</strong> separate the final two items with <code>comma-conj</code>; all others use <code>comma</code>.</li>
</ul>
<h4><a class="header" href="#examples-6" id="examples-6">Examples</a></h4>
<h5><a class="header" href="#print-lists-with-oxford-comma" id="print-lists-with-oxford-comma">Print lists with Oxford comma</a></h5>
<pre><code class="language-rant">&lt;$numbers = ()&gt;
[rep: 5][sep: \n]
{
  [push: &lt;numbers&gt;; [step]]
  [oxford-join: ,\s; \sand\s; ,\sand\s; &lt;numbers&gt;]
}

##
  OUTPUT:

  1
  1 and 2
  1, 2, and 3
  1, 2, 3, and 4
  1, 2, 3, 4, and 5
##
</code></pre>
<h5><a class="header" href="#print-lists-without-oxford-comma" id="print-lists-without-oxford-comma">Print lists without Oxford comma</a></h5>
<pre><code class="language-rant">&lt;$numbers = ()&gt;
[rep: 5][sep: \n]
{
  [push: &lt;numbers&gt;; [step]]
  [oxford-join: ,\s; \sand\s; \sand\s; &lt;numbers&gt;]
}

##
  OUTPUT:

  1
  1 and 2
  1, 2 and 3
  1, 2, 3 and 4
  1, 2, 3, 4 and 5
##
</code></pre>
<h3><a class="header" href="#push-list-value" id="push-list-value">[push: list; value]</a></h3>
<p>Appends a value to the end of a list.</p>
<h3><a class="header" href="#pop-list" id="pop-list">[pop: list]</a></h3>
<p>→ <code>any</code></p>
<p>Removes the last value from a list and prints it.</p>
<h3><a class="header" href="#insert-collection-value-pos" id="insert-collection-value-pos">[insert: collection; value; pos]</a></h3>
<p>Inserts <code>value</code> into a list or map at the position <code>pos</code>.</p>
<p>If <code>collection</code> is a list, <code>pos</code> must be an <code>int</code>.<br>
If <code>collection</code> is a map, <code>pos</code> may be any non-empty value.</p>
<h4><a class="header" href="#errors-5" id="errors-5">Errors</a></h4>
<p>Causes a runtime error if any of the following are true:</p>
<ul>
<li><code>collection</code> is not a list or map</li>
<li><code>pos</code> is an unsupported type for the provided collection</li>
<li><code>collection</code> is a list and <code>pos</code> is out of range</li>
</ul>
<h3><a class="header" href="#len-obj" id="len-obj">[len: obj]</a></h3>
<p>→ <code>int</code></p>
<p>Prints the length of <code>obj</code>.</p>
<p>For <code>string</code>, this is the number of graphemes; for <code>list</code>, <code>map</code>, and <code>range</code>, the number of elements.
All other value types give a length of 1.</p>
<h3><a class="header" href="#remove-collection-pos" id="remove-collection-pos">[remove: collection; pos]</a></h3>
<p>Removes the value at the <code>pos</code> from a list or map.</p>
<p>If <code>collection</code> is a list, <code>pos</code> must be an <code>int</code>.<br>
If <code>collection</code> is a map, <code>pos</code> may be any non-empty value.</p>
<h4><a class="header" href="#errors-6" id="errors-6">Errors</a></h4>
<p>Causes a runtime error if any of the following are true:</p>
<ul>
<li><code>collection</code> is not a list or map</li>
<li><code>pos</code> is an unsupported type for the provided collection</li>
<li><code>collection</code> is a list and <code>pos</code> is out of range</li>
</ul>
<h3><a class="header" href="#rev-collection" id="rev-collection">[rev: collection]</a></h3>
<p>Creates a reversed copy of the input collection.</p>
<h4><a class="header" href="#example-8" id="example-8">Example</a></h4>
<pre><code class="language-rant">[rev: (foo; bar)]
# -&gt; (bar; foo)
</code></pre>
<h3><a class="header" href="#shuffle-list" id="shuffle-list">[shuffle: list]</a></h3>
<p>Shuffles the elements of a list in-place.</p>
<h4><a class="header" href="#example-9" id="example-9">Example</a></h4>
<pre><code class="language-rant"># Shuffles a list of letters and concatenates them into a single string
&lt;$letters = (A;B;C;D;E;F;G;H;I;J;K;L)&gt;
[shuffle: &lt;letters&gt;]
[join: ; &lt;letters&gt;]

# ~&gt; GKIBCHLEJADF
</code></pre>
<h3><a class="header" href="#shuffled-list" id="shuffled-list">[shuffled: list]</a></h3>
<p>→ <code>list</code></p>
<p>Creates a shuffled copy of a list.</p>
<h4><a class="header" href="#example-10" id="example-10">Example</a></h4>
<pre><code class="language-rant"># Shuffle the words in a string
&lt;$message = &quot;the quick brown fox jumps over he lazy dog&quot;&gt;
[join: \s; [shuffled: [split: &lt;message&gt;; \s]]]

# ~&gt; jumps fox quick dog lazy the brown the over
</code></pre>
<h3><a class="header" href="#sift-list-target-size" id="sift-list-target-size">[sift: list; target-size]</a></h3>
<p>Removes random elements from a list in-place until the number of elements in the list reaches <code>target-size</code>.
If the number of elements in the list is less than or equal to <code>target-size</code>, this function does nothing.</p>
<h4><a class="header" href="#example-11" id="example-11">Example</a></h4>
<pre><code class="language-rant"># Remove a random element from a list and print the contents at each iteration
&lt;$list = [split: &quot;Sphinx of black quartz, judge my vow.&quot;; \s]&gt;
[rep: [len: &lt;list&gt;]]
[sep: \n]
{
  # Print the current list contents
  [join: \s; &lt;list&gt;]
  # Sift the list to n - 1
  [sift: &lt;list&gt;; [sub: [len: &lt;list&gt;]; 1]]
}

##
  EXAMPLE OUTPUT:

  Sphinx of black quartz, judge my vow.
  Sphinx of black quartz, my vow.
  Sphinx of black quartz, vow.
  Sphinx of black vow.
  Sphinx black vow.
  Sphinx vow.
  vow.
##
</code></pre>
<h3><a class="header" href="#sifted-list-target-size" id="sifted-list-target-size">[sifted: list; target-size]</a></h3>
<p>→ <code>list</code></p>
<p>Returns a copy of a list with random elements removed until the number of elements in the list copy reaches <code>target-size</code>.
If the number of elements in the list is less than or equal to <code>target-size</code>, this function simply returns an exact copy of the original list.</p>
<h4><a class="header" href="#example-12" id="example-12">Example</a></h4>
<pre><code class="language-rant"># Create a random subset of abilities for a character

&lt;$char-traits = (
  berserk;    xray-vision;  speaks-to-bees; 
  vampirism;  flying;       telekinesis; 
  many-legs;  high-jump;    bee-allergy
)&gt;

&lt;$npc = @(
  name = &quot;Foo Bar&quot;;
  traits = [sifted: &lt;char-traits&gt;; 2];
)&gt;

# Print character info
&lt;npc/name&gt;: '[join: ,\s; &lt;npc/traits&gt;]

# ~&gt; Foo Bar: speaks-to-bees, many-legs
</code></pre>
<h3><a class="header" href="#squish-list-target-size" id="squish-list-target-size">[squish: list; target-size]</a></h3>
<p>Merges random adjacent elements in a list using addition until the number of elements in the list reaches <code>target-size</code>.
If the number of elements in the list is less than or equal to <code>target-size</code>, this function does nothing.</p>
<h4><a class="header" href="#example-13" id="example-13">Example</a></h4>
<pre><code class="language-rant"># Merge random items in a number list
&lt;$numbers = (100; 100; 100; 100; 100; 100; 100; 100; 100; 100)&gt;

# Print the original list
Before: '[join: ,\s; &lt;numbers&gt;]\n

# Squish the list down to 5 elements
[squish: &lt;numbers&gt;; 5]

# Print the modified list
After: '[join: ,\s; &lt;numbers&gt;]\n

##
  EXAMPLE OUTPUT:

  Before: 100, 100, 100, 100, 100, 100, 100, 100, 100, 100
  After: 100, 200, 100, 400, 200
##
</code></pre>
<h3><a class="header" href="#squished-list-target-size" id="squished-list-target-size">[squished: list; target-size]</a></h3>
<p>→ <code>list</code></p>
<p>Returns a copy of a list with random adjacent elements merged using addition until the number of elements in the list copy reaches <code>target-size</code>.
If the number of elements in the list is less than or equal to <code>target-size</code>, this function simply returns an exact copy of the original list.</p>
<h3><a class="header" href="#sort-list" id="sort-list">[sort: list]</a></h3>
<p>Sorts the elements of a list in-place in ascending order.</p>
<h3><a class="header" href="#sorted-list" id="sorted-list">[sorted: list]</a></h3>
<p>→ <code>list</code></p>
<p>Creates a copy of a list with its elements sorted in ascending order.</p>
<h3><a class="header" href="#sum-list" id="sum-list">[sum: list]</a></h3>
<p>→ <code>any</code></p>
<p>Adds the elements of a list together from left to right and prints the result.</p>
<h3><a class="header" href="#take-collection-pos" id="take-collection-pos">[take: collection; pos]</a></h3>
<p>→ <code>any</code></p>
<p>Removes the value at <code>pos</code> from a list or map and prints it.</p>
<p>If <code>collection</code> is a <code>list</code>, <code>pos</code> must be an <code>int</code>.<br>
If <code>collection</code> is a <code>map</code>, <code>pos</code> may be any non-empty value.</p>
<h4><a class="header" href="#errors-7" id="errors-7">Errors</a></h4>
<p>Causes a runtime error if any of the following are true:</p>
<ul>
<li><code>collection</code> is not a list or map</li>
<li><code>pos</code> is an unsupported type for the provided collection</li>
<li><code>collection</code> is a list and <code>pos</code> is out of range</li>
</ul>
<h4><a class="header" href="#errors-8" id="errors-8">Errors</a></h4>
<p>Causes a runtime error if <code>collection</code> is a list and the <code>pos</code> is out of range.</p>
<h3><a class="header" href="#translate-list-map" id="translate-list-map">[translate: list; map]</a></h3>
<p>→ <code>list</code></p>
<p>Matches each item in a list to a map and returns a list with the corresponding map values. 
Values that have no corresponding key in the map are passed through as-is.</p>
<h4><a class="header" href="#example-14" id="example-14">Example</a></h4>
<pre><code class="language-rant"># Constructs a substitution cipher function
[$make-cipher: alphabet] {
  &lt;
    $letters = [split: &lt;alphabet&gt;];
    $sub-letters = [shuffled: &lt;letters&gt;];
    $cipher = [assoc: &lt;letters&gt;; &lt;sub-letters&gt;];
    $cipher-rev = [assoc: &lt;sub-letters&gt;; &lt;letters&gt;];
  &gt;
  # Return cipher functions
  @(
    encode = [?: message] {
      [sum: [translate: [split: &lt;message&gt;]; &lt;cipher&gt;]]
    };
    decode = [?: message] {
      [sum: [translate: [split: &lt;message&gt;]; &lt;cipher-rev&gt;]]
    };
  )
}

# Create a cipher and encode/decode a message
&lt;$cipher = [make-cipher: &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz&quot;]&gt;
&lt;$secret-message = &quot;The quick brown fox jumps over the lazy dog.&quot;&gt;
&lt;$encoded-message = [cipher/encode: &lt;secret-message&gt;]&gt;
&lt;$decoded-message = [cipher/decode: &lt;encoded-message&gt;]&gt;

# Finally, print the result
Original: \&quot;&lt;secret-message&gt;\&quot;\n
Encoded: \&quot;&lt;encoded-message&gt;\&quot;\n
Decoded: \&quot;&lt;decoded-message&gt;\&quot;\n

##
  EXAMPLE OUTPUT:

  Original: &quot;The quick brown fox jumps over the lazy dog.&quot;
  Encoded: &quot;kWj KGvaF QcDiq HDx CGpMJ DOjc AWj Tsyt fDN.&quot;
  Decoded: &quot;The quick brown fox jumps over the lazy dog.&quot;
##
</code></pre>
<h3><a class="header" href="#zip-list-a-list-b-zip-func" id="zip-list-a-list-b-zip-func">[zip: list-a; list-b; zip-func]</a></h3>
<p>→ <code>list</code></p>
<p>Returns a new list that combines each pair of items from the two input lists using the specified function.
The lists do not need to be the same length; if there is a difference, it will be made up with empty values.</p>
<p>The <code>zip-func</code> must accept two parameters.</p>
<h4><a class="header" href="#examples-7" id="examples-7">Examples</a></h4>
<pre><code class="language-rant"># Dot product
[$dot: a; b] {
  [zip: &lt;a&gt;; &lt;b&gt;; &lt;mul&gt; |&gt; sum]
}

[dot: (1; 2; 3); (4; 5; 6)] # 32
</code></pre>
<h1><a class="header" href="#standard-library-generators" id="standard-library-generators">Standard Library: Generators</a></h1>
<h3><a class="header" href="#dig-count" id="dig-count">[dig: count?]</a></h3>
<p>→ <code>string</code></p>
<p>Prints a uniformly random decimal digit. If <code>count</code> is specified, repeats <code>count</code> times.</p>
<pre><code class="language-rant"># Generate a random 32-character decimal string
[dig:32] # ~&gt; 01952208554533821061510695429126
</code></pre>
<h3><a class="header" href="#digh-count" id="digh-count">[digh: count?]</a></h3>
<p>→ <code>string</code></p>
<p>Prints a uniformly random lowercase hexadecimal digit. If <code>count</code> is specified, repeats <code>count</code> times.</p>
<h4><a class="header" href="#example-15" id="example-15">Example</a></h4>
<pre><code class="language-rant"># Generate a random 32-character hex string
[digh:32] # ~&gt; f4e5bef31ea02eac22f220e68e837587
</code></pre>
<h3><a class="header" href="#dignz-count" id="dignz-count">[dignz: count?]</a></h3>
<p>→ <code>string</code></p>
<p>Prints a uniformly random non-zero decimal digit. If <code>count</code> is specified, repeats <code>count</code> times.</p>
<pre><code class="language-rant"># Generate a random 32-character decimal string without zeros
[dignz:32] # ~&gt; 92558761934966287236132511739511
</code></pre>
<h3><a class="header" href="#maybe-p" id="maybe-p">[maybe: p?]</a></h3>
<p>→ <code>bool</code></p>
<p>Returns a <code>bool</code> value with <code>p</code> probability of being true.</p>
<p><code>p</code> must be either a <code>float</code> or <code>empty</code>. If omitted, it will default to <code>0.5</code>.</p>
<h3><a class="header" href="#rand-a-b" id="rand-a-b">[rand: a; b]</a></h3>
<p>→ <code>int</code></p>
<p>Prints a random integer with uniform distribution between <code>a</code> and <code>b</code> (both inclusive).</p>
<h4><a class="header" href="#example-16" id="example-16">Example</a></h4>
<pre><code class="language-rant">You roll the dice and get '[rand:1;6] and '[rand:1;6].
# You roll the dice and get 2 and 5.
</code></pre>
<h3><a class="header" href="#randf-a-b" id="randf-a-b">[randf: a; b]</a></h3>
<p>→ <code>float</code></p>
<p>Prints a random float with uniform distribution between <code>a</code> (inclusive) and <code>b</code> (exclusive).</p>
<h3><a class="header" href="#rand-list-a-b-n" id="rand-list-a-b-n">[rand-list: a; b; n]</a></h3>
<p>→ <code>list</code></p>
<p>Prints a list of <code>n</code> random integers with uniform distribution between <code>a</code> and <code>b</code> (both inclusive).</p>
<h4><a class="header" href="#example-17" id="example-17">Example</a></h4>
<pre><code class="language-rant"># 2-dice roll

&lt;$roll = [rand-list: 1; 6; 2]&gt;
You rolled '[join: \sand\s; &lt;roll&gt;] for a total of '[sum: &lt;roll&gt;].

# ~&gt; You rolled 5 and 3 for a total of 8.
</code></pre>
<h3><a class="header" href="#randf-list-a-b-n" id="randf-list-a-b-n">[randf-list: a; b; n]</a></h3>
<p>→ <code>list</code></p>
<p>Prints a list of <code>n</code> random floats with uniform distribution between <code>a</code> (inclusive) and <code>b</code> (exclusive).</p>
<h3><a class="header" href="#shred-input-count-variance" id="shred-input-count-variance">[shred: input; count; variance]</a></h3>
<p>→ <code>list</code></p>
<p>Generates a list of <code>count</code> random numbers that vary from each other by <code>variance</code>, and whose sum equals <code>input</code>.</p>
<p>All three arguments must be numbers, and <code>count</code> must be an <code>int</code>.</p>
<h4><a class="header" href="#errors-9" id="errors-9">Errors</a></h4>
<p>Causes a runtime error if:</p>
<ul>
<li><code>input</code>, <code>count</code>, or <code>variance</code> is not a number</li>
<li><code>count</code> is zero or negative</li>
</ul>
<h4><a class="header" href="#example-18" id="example-18">Example</a></h4>
<pre><code class="language-rant"># Generate and print a list of 5 random numbers that add up to 1000
&lt;$parts = [shred:1000;5;200]&gt;
[join:&quot; + &quot;;&lt;parts&gt;] = [sum:&lt;parts&gt;]

##
Output:
170 + 378 + 83 + 189 + 180 = 1000
##
</code></pre>
<h1><a class="header" href="#formatting" id="formatting">Formatting</a></h1>
<h1><a class="header" href="#standard-library-string-functions" id="standard-library-string-functions">Standard Library: String functions</a></h1>
<h3><a class="header" href="#lines-str" id="lines-str">[lines: str]</a></h3>
<p>→ <code>list</code></p>
<p>Splits string <code>str</code> by line feed characters (0x0A, <code>\n</code>) and returns a list of the results.</p>
<h3><a class="header" href="#lower-str" id="lower-str">[lower: str]</a></h3>
<p>→ <code>string</code></p>
<p>Converts string <code>str</code> to lowercase and returns the result.</p>
<h3><a class="header" href="#split-text-sep" id="split-text-sep">[split: text; sep?]</a></h3>
<p>→ <code>list</code></p>
<p>Splits the input text by <code>sep</code> into a list of strings. If <code>sep</code> is omitted, splits into characters.</p>
<h3><a class="header" href="#seg-text-size" id="seg-text-size">[seg: text; size]</a></h3>
<p>→ <code>list</code></p>
<p>Segments the input text into a list of strings of <code>size</code> length.</p>
<h3><a class="header" href="#upper-str" id="upper-str">[upper: str]</a></h3>
<p>→ <code>string</code></p>
<p>Converts string <code>str</code> to uppercase and returns the result.</p>
<h1><a class="header" href="#standard-library-boolean-functions" id="standard-library-boolean-functions">Standard Library: Boolean functions</a></h1>
<h3><a class="header" href="#and-a-b-c" id="and-a-b-c">[and: a; b; c*]</a></h3>
<p>→ <code>bool</code></p>
<p>Performs a short-circuiting boolean AND on the operands and returns the result.</p>
<h3><a class="header" href="#not-a" id="not-a">[not: a]</a></h3>
<p>→ <code>bool</code></p>
<p>Returns the inverse of the input boolean value.</p>
<h3><a class="header" href="#or-a-b-c" id="or-a-b-c">[or: a; b; c*]</a></h3>
<p>→ <code>bool</code></p>
<p>Performs a short-circuiting boolean OR on the operands and returns the result.</p>
<h3><a class="header" href="#xor-a-b" id="xor-a-b">[xor: a; b]</a></h3>
<p>→ <code>bool</code></p>
<p>Performs a boolean XOR on the operands and returns the result.</p>
<h1><a class="header" href="#comparison" id="comparison">Comparison</a></h1>
<h3><a class="header" href="#eq-lhs-rhs" id="eq-lhs-rhs">[eq: lhs; rhs]</a></h3>
<p>→ <code>bool</code></p>
<p>Returns <code>true</code> if <code>lhs</code> and <code>rhs</code> are equal.</p>
<h3><a class="header" href="#ge-lhs-rhs" id="ge-lhs-rhs">[ge: lhs; rhs]</a></h3>
<p>→ <code>bool</code></p>
<p>Returns <code>true</code> if <code>lhs</code> is greater than or equal to <code>rhs</code>.</p>
<h3><a class="header" href="#gt-lhs-rhs" id="gt-lhs-rhs">[gt: lhs; rhs]</a></h3>
<p>→ <code>bool</code></p>
<p>Returns <code>true</code> if <code>lhs</code> is greater than <code>rhs</code>.</p>
<h3><a class="header" href="#le-lhs-rhs" id="le-lhs-rhs">[le: lhs; rhs]</a></h3>
<p>→ <code>bool</code></p>
<p>Returns <code>true</code> if <code>lhs</code> is less than or equal to <code>rhs</code>.</p>
<h3><a class="header" href="#lt-lhs-rhs" id="lt-lhs-rhs">[lt: lhs; rhs]</a></h3>
<p>→ <code>bool</code></p>
<p>Returns <code>true</code> if <code>lhs</code> is less than <code>rhs</code>.</p>
<h3><a class="header" href="#neq-lhs-rhs" id="neq-lhs-rhs">[neq: lhs; rhs]</a></h3>
<p>→ <code>bool</code></p>
<p>Returns <code>true</code> if <code>lhs</code> and <code>rhs</code> are not equal.</p>
<h1><a class="header" href="#standard-library-math-functions" id="standard-library-math-functions">Standard Library: Math functions</a></h1>
<h3><a class="header" href="#abs-num" id="abs-num">[abs: num]</a></h3>
<p>→ <code>int</code> or <code>float</code></p>
<p>Calculates the absolute value of <code>num</code>.</p>
<h4><a class="header" href="#errors-10" id="errors-10">Errors</a></h4>
<p>Raises an error if <code>num</code> is an integer and the absolute value overflows.</p>
<h3><a class="header" href="#add-lhs-rhs" id="add-lhs-rhs">[add: lhs; rhs]</a></h3>
<p>→ <code>any</code></p>
<p>Adds two values.</p>
<h3><a class="header" href="#ceil-val" id="ceil-val">[ceil: val]</a></h3>
<p>→ <code>int</code></p>
<p>Gets the smallest integer that is greater than or equal to <code>val</code>.</p>
<p><code>val</code> must be a <code>float</code>.</p>
<h3><a class="header" href="#div-lhs-rhs" id="div-lhs-rhs">[div: lhs; rhs]</a></h3>
<p>→ <code>any</code></p>
<p>Divides two values.</p>
<h3><a class="header" href="#floor-val" id="floor-val">[floor: val]</a></h3>
<p>→ <code>int</code></p>
<p>Gets the largest integer that is less than or equal to <code>val</code>.</p>
<p><code>val</code> must be a <code>float</code>.</p>
<h3><a class="header" href="#frac-val" id="frac-val">[frac: val]</a></h3>
<p>→ <code>float</code></p>
<p>Gets the fractional part of <code>val</code>.</p>
<p><code>val</code> must be a <code>float</code>.</p>
<h3><a class="header" href="#max-values" id="max-values">[max: values+]</a></h3>
<p>→ <code>any</code></p>
<p>Returns the largest value in <code>values</code>.</p>
<p>Any elements of type <code>list</code> in <code>values</code> will be expanded to their individual elements
before the maximum value is calculated.</p>
<h4><a class="header" href="#examples-8" id="examples-8">Examples</a></h4>
<pre><code class="language-rant"># Arguments can be single values
[max: 3; 2 |&gt; assert-eq: 3]

# Lists are treated as their individual elements
[max: (3; 2) |&gt; assert-eq: 3]

# Even alongside single values, lists are still expanded!
[max: 3; (4; -2; 0; 10); 6 |&gt; assert-eq: 10]
</code></pre>
<h3><a class="header" href="#min-values" id="min-values">[min: values+]</a></h3>
<p>→ <code>any</code></p>
<p>Returns the smallest value in <code>values</code>.</p>
<p>Any elements of type <code>list</code> in <code>values</code> will be expanded to their individual elements
before the minimum value is calculated.</p>
<h4><a class="header" href="#examples-9" id="examples-9">Examples</a></h4>
<pre><code class="language-rant"># Arguments can be single values
[min: 3; 2 |&gt; assert-eq: 2]

# Lists are treated as their individual elements
[min: (3; 2) |&gt; assert-eq: 2]

# Even alongside single values, lists are still expanded!
[min: 3; (4; -2; 0; 10); 6 |&gt; assert-eq: -2]
</code></pre>
<h3><a class="header" href="#mod-lhs-rhs" id="mod-lhs-rhs">[mod: lhs; rhs]</a></h3>
<p>→ <code>any</code></p>
<p>Gets the modulus of two values.</p>
<h3><a class="header" href="#mul-lhs-rhs" id="mul-lhs-rhs">[mul: lhs; rhs]</a></h3>
<p>→ <code>any</code></p>
<p>Multiplies two values.</p>
<h3><a class="header" href="#mul-add-lhs-rhs-add" id="mul-add-lhs-rhs-add">[mul-add: lhs; rhs; add]</a></h3>
<p>→ <code>any</code></p>
<p>Multiplies two values, then adds another value to the result.</p>
<h3><a class="header" href="#neg-n" id="neg-n">[neg: n]</a></h3>
<p>→ <code>any</code></p>
<p>Negates a value.</p>
<h3><a class="header" href="#recip-n" id="recip-n">[recip: n]</a></h3>
<p>→ <code>any</code></p>
<p>Gets the reciprocal of a value.</p>
<h3><a class="header" href="#sub-lhs-rhs" id="sub-lhs-rhs">[sub: lhs; rhs]</a></h3>
<p>→ <code>any</code></p>
<p>Subtracts two values.</p>
<h3><a class="header" href="#sin-x" id="sin-x">[sin: x]</a></h3>
<p>→ <code>float</code></p>
<p>Calculates the sine of <code>x</code> (in radians).</p>
<h3><a class="header" href="#cos-x" id="cos-x">[cos: x]</a></h3>
<p>→ <code>float</code></p>
<p>Calculates the cosine of <code>x</code> (in radians).</p>
<h3><a class="header" href="#tan-x" id="tan-x">[tan: x]</a></h3>
<p>→ <code>float</code></p>
<p>Calculates the tangent of <code>x</code> (in radians).</p>
<h3><a class="header" href="#asin-x" id="asin-x">[asin: x]</a></h3>
<p>→ <code>float</code></p>
<p>Calculates the arcsine (in radians) of <code>x</code>.</p>
<h3><a class="header" href="#acos-x" id="acos-x">[acos: x]</a></h3>
<p>→ <code>float</code></p>
<p>Calculates the arccosine (in radians) of <code>x</code>.</p>
<h3><a class="header" href="#atan-x" id="atan-x">[atan: x]</a></h3>
<p>→ <code>float</code></p>
<p>Calculates the arctangent (in radians) of <code>x</code>.</p>
<h3><a class="header" href="#atan2-y-x" id="atan2-y-x">[atan2: y; x]</a></h3>
<p>→ <code>float</code></p>
<p>Calculates the four-quadrant arctangent (in radians) of <code>y / x</code>.</p>
<h3><a class="header" href="#notes" id="notes">Notes</a></h3>
<p>Returns 0 if <code>x</code> or <code>y</code> is 0.</p>
<h3><a class="header" href="#sqrt-x" id="sqrt-x">[sqrt: x]</a></h3>
<p>→ <code>float</code></p>
<p>Calculates the square root of <code>x</code>.</p>
<h3><a class="header" href="#pow-x-y" id="pow-x-y">[pow: x; y]</a></h3>
<p>Raises <code>x</code> to the power of <code>y</code>. Both <code>x</code> and <code>y</code> can be <code>int</code> or <code>float</code>.</p>
<h4><a class="header" href="#errors-11" id="errors-11">Errors</a></h4>
<p>Raises an overflow error if a <code>x</code> is an <code>int</code> and <code>x ^ y</code> causes an overflow.</p>
<h1><a class="header" href="#standard-library-conversion-functions" id="standard-library-conversion-functions">Standard Library: Conversion functions</a></h1>
<h3><a class="header" href="#float-value" id="float-value">[float: value]</a></h3>
<p>→ <code>float</code> or <code>empty</code></p>
<p>Attempts to convert <code>value</code> to a <code>float</code> value and returns the result.
If the conversion fails, returns <code>empty</code> value.</p>
<h3><a class="header" href="#int-value" id="int-value">[int: value]</a></h3>
<p>→ <code>int</code> or <code>empty</code></p>
<p>Attempts to convert <code>value</code> to an <code>int</code> value and returns the reuslt.
If the conversion fails, returns <code>empty</code> value.</p>
<h3><a class="header" href="#string-value" id="string-value">[string: value]</a></h3>
<p>→ <code>string</code> or <code>empty</code></p>
<p>Attempts to convert <code>value</code> to a <code>string</code> value and returns the result.
If the conversion fails, returns <code>empty</code> value.</p>
<h3><a class="header" href="#list-value" id="list-value">[list: value]</a></h3>
<p>→ <code>list</code> or <code>empty</code></p>
<p>Attempts to convert <code>value</code> to a <code>list</code> and returns the result.
If the conversion fails, returns <code>empty</code> value.</p>
<p><strong>From <code>string</code></strong></p>
<p>Passing a <code>string</code> value into this function returns a <code>list</code> of the string's graphemes.</p>
<pre><code class="language-rant">&lt;%letters = [list: &quot;hello&quot;]&gt;
[assert-eq: &lt;letters&gt;; (h; e; l; l; o)]
</code></pre>
<h4><a class="header" href="#from-list" id="from-list">From <code>list</code></a></h4>
<p>Passing a <code>list</code> value into this function returns a shallow copy of it.
This is equivalent to calling <code>[copy]</code> on the list.</p>
<h4><a class="header" href="#from-range" id="from-range">From <code>range</code></a></h4>
<p>Passing a <code>range</code> value into this function returns a list of the range's elements in order.</p>
<pre><code class="language-rant">&lt;%seq = [range: 0; 5 |&gt; list]&gt;
[assert-eq: &lt;seq&gt;; (0; 1; 2; 3; 4)]
</code></pre>
<h1><a class="header" href="#standard-library-verification-functions" id="standard-library-verification-functions">Standard Library: Verification functions</a></h1>
<h3><a class="header" href="#is-any-value" id="is-any-value">[is-any: value]</a></h3>
<p>→ <code>bool</code></p>
<p>Returns <code>true</code> if <code>value</code> is any non-<code>empty</code> type.</p>
<h3><a class="header" href="#is-between-value-a-b" id="is-between-value-a-b">[is-between: value; a; b]</a></h3>
<p>→ <code>bool</code></p>
<p>Returns <code>true</code> if <code>value</code> is bewteen <code>a</code> and <code>b</code> (both inclusive).</p>
<h3><a class="header" href="#is-bool-value" id="is-bool-value">[is-bool: value]</a></h3>
<p>→ <code>bool</code></p>
<p>Returns <code>true</code> if <code>value</code> is of type <code>bool</code>.</p>
<h3><a class="header" href="#is-empty-value" id="is-empty-value">[is-empty: value]</a></h3>
<p>→ <code>bool</code></p>
<p>Returns <code>true</code> if <code>value</code> is <code>~</code>.</p>
<h3><a class="header" href="#is-even-number" id="is-even-number">[is-even: number]</a></h3>
<p>→ <code>bool</code></p>
<p>Returns <code>true</code> if <code>number</code> is an even number.</p>
<h3><a class="header" href="#is-float-value" id="is-float-value">[is-float: value]</a></h3>
<p>→ <code>bool</code></p>
<p>Returns <code>true</code> if <code>value</code> is of type <code>float</code>.</p>
<h3><a class="header" href="#is-int-value" id="is-int-value">[is-int: value]</a></h3>
<p>→ <code>bool</code></p>
<p>Returns <code>true</code> if <code>value</code> is of type <code>int</code>.</p>
<h3><a class="header" href="#is-nan-value" id="is-nan-value">[is-nan: value]</a></h3>
<p>→ <code>bool</code></p>
<p>Returns <code>true</code> if <code>value</code> is of type <code>float</code> and equal to NaN (Not a Number).</p>
<h3><a class="header" href="#is-number-value" id="is-number-value">[is-number: value]</a></h3>
<p>→ <code>bool</code></p>
<p>Returns <code>true</code> if <code>value</code> is of type <code>int</code> or <code>float</code>.</p>
<h3><a class="header" href="#is-odd-number" id="is-odd-number">[is-odd: number]</a></h3>
<p>→ <code>bool</code></p>
<p>Returns <code>true</code> if <code>number</code> is an odd number.</p>
<h3><a class="header" href="#is-string-value" id="is-string-value">[is-string: value]</a></h3>
<p>→ <code>bool</code></p>
<p>Returns <code>true</code> if <code>value</code> is of type <code>string</code>.</p>
<h1><a class="header" href="#assertion" id="assertion">Assertion</a></h1>
<h3><a class="header" href="#assert-condition-message" id="assert-condition-message">[assert: condition; message?]</a></h3>
<p>Asserts that <code>condition</code> is true.</p>
<p>If <code>condition</code> is <code>false</code>, raises a runtime error; if <code>true</code>, does nothing.</p>
<p>The message displayed in the runtime error can be customized by passing a string to <code>message</code>. </p>
<h4><a class="header" href="#examples-10" id="examples-10">Examples</a></h4>
<pre><code class="language-rant"># does absolutely nothing
[assert: true]

# [assertion error] assertion failed: condition was false
[assert: false]

# [assertion error] ooooops!
[assert: false; &quot;ooooops!&quot;] 
</code></pre>
<h3><a class="header" href="#assert-eq-actual-expected-message" id="assert-eq-actual-expected-message">[assert-eq: actual; expected; message?]</a></h3>
<p>Asserts that <code>expected</code> and <code>actual</code> are equal.</p>
<p>Like <code>[assert]</code>, a custom error message can be provided.</p>
<h3><a class="header" href="#assert-neq-actual-unexpected-message" id="assert-neq-actual-unexpected-message">[assert-neq: actual; unexpected; message?]</a></h3>
<p>Asserts that <code>unexpected</code> and <code>actual</code> are not equal.</p>
<p>Like <code>[assert]</code>, a custom error message can be provided.</p>
<h1><a class="header" href="#standard-library-constants" id="standard-library-constants">Standard Library: Constants</a></h1>
<h3><a class="header" href="#rant_version" id="rant_version">RANT_VERSION</a></h3>
<p><code>string</code></p>
<p>The version of the Rant language currently being used.</p>
<h1><a class="header" href="#glossary" id="glossary">Glossary</a></h1>
<h3><a class="header" href="#accessor" id="accessor">Accessor</a></h3>
<p>Accessors are program elements that read or write values. They are the primary means of interacting with variables.</p>
<p>There are three types of accessors: <strong>getters</strong>, <strong>setters</strong>, and <strong>definitions</strong>.</p>
<h3><a class="header" href="#access-path" id="access-path">Access path</a></h3>
<p>An access path is used to access variables or items in collections. They consist of <code>/</code>-delimited series of identifiers, keys, and indices. </p>
<h3><a class="header" href="#associative-block" id="associative-block">Associative block</a></h3>
<p>Associative blocks are a special block type dividing each element into left- and right-hand sides.</p>
<p>The left-hand side (LHS) associaties some value (usually a weight or case value) with the element, 
while the right-hand side (RHS) contains the code associated with the element.</p>
<p>This block type is typically used for conditional or weighted branching.</p>
<h3><a class="header" href="#attribute" id="attribute">Attribute</a></h3>
<p>Attributes modify <strong>block</strong> behavior, such as how many times a block repeats or how it selects elements.</p>
<p>Attributes can be set through <strong>attribute functions</strong>.</p>
<h3><a class="header" href="#attribute-frame" id="attribute-frame">Attribute frame</a></h3>
<p>An attribute frame is a full set of all available attributes. A program's attribute stack always contains at least one frame.</p>
<h3><a class="header" href="#attribute-functions" id="attribute-functions">Attribute functions</a></h3>
<p>A function that reads or writes an <strong>attribute</strong>.</p>
<h3><a class="header" href="#attribute-stack" id="attribute-stack">Attribute stack</a></h3>
<p>Each program maintains an &quot;attribute stack&quot;, which stores and provides <strong>attributes</strong> to <strong>blocks</strong>.
When a block runs, it consumes the attributes in the topmost frame of the attribute stack, replacing them with their default values.</p>
<p>The user can add and remove frames from the attribute stack to preserve attributes for later use.</p>
<h3><a class="header" href="#block" id="block">Block</a></h3>
<p>A block is a section of a Rant program subdivided into zero or more parts.
Blocks act as variable scopes and can be combined with various constructs to produce a wide variety of behaviors.</p>
<h3><a class="header" href="#closure" id="closure">Closure</a></h3>
<p>A closure is a function that captures one or more variables from its environment.</p>
<h3><a class="header" href="#construct" id="construct">Construct</a></h3>
<p>A construct is a group of one or more runtime variables can be used to interact with the Rant runtime 
and customize various aspects of program behavior.</p>
<h3><a class="header" href="#definition" id="definition">Definition</a></h3>
<p>A definition is an accessor type that creates a new variable.</p>
<h3><a class="header" href="#descoping" id="descoping">Descoping</a></h3>
<p>Descoping is a type of variable access that explicitly retrieves a variable from a parent scope, overriding <strong>shadowing</strong>.</p>
<h3><a class="header" href="#dynamic-key" id="dynamic-key">Dynamic key</a></h3>
<p>A dynamic key is an access path key, consisting of a single-element block, that must be resolved before the containing path can be read. 
The block resolves to the final key or index that will be inserted into the path.</p>
<h3><a class="header" href="#formatter" id="formatter">Formatter</a></h3>
<p>A formatter is a runtime component that passively changes the output in some way.</p>
<h3><a class="header" href="#fragment" id="fragment">Fragment</a></h3>
<p>A fragment is a sequence of any non-whitespace, non-reserved characters found in a Rant program.</p>
<h3><a class="header" href="#function-percolation" id="function-percolation">Function percolation</a></h3>
<p>Function percolation is the ability of function calls to access functions from parent scopes despite <strong>shadowing</strong> by non-function variables.
It is an implicit form of <strong>descoping</strong>.</p>
<h3><a class="header" href="#getter" id="getter">Getter</a></h3>
<p>A getter is an accessor type that retrieves a value from a variable or collection.</p>
<h3><a class="header" href="#hint" id="hint">Hint</a></h3>
<p>A hint is a compile-time operation that informs the Rant compiler that the next program element is expected to print to the output.</p>
<h3><a class="header" href="#identifier" id="identifier">Identifier</a></h3>
<p>A name assigned to a <strong>variable</strong> or <strong>module</strong>.</p>
<p>Identifiers enforce specific formatting requirements to ensure consistency:</p>
<ul>
<li>Must contain <strong>at least one</strong> alphanumeric character.</li>
<li>Must only contain alphanumeric characters, underscores, and hyphens.</li>
</ul>
<h3><a class="header" href="#list-1" id="list-1">List</a></h3>
<p>A list is an ordered collection of values, accessible by index.</p>
<h3><a class="header" href="#map-1" id="map-1">Map</a></h3>
<p>A map is a collection of key-value pairs, also known as an &quot;associative array&quot;.</p>
<h3><a class="header" href="#module" id="module">Module</a></h3>
<p>A module is a library of Rant functions that can be loaded into another program using the <code>[require]</code> function.</p>
<h3><a class="header" href="#repeater" id="repeater">Repeater</a></h3>
<p>A block that can iterate multiple times. Repeaters are created by calling <code>[rep]</code>.</p>
<h3><a class="header" href="#resolution" id="resolution">Resolution</a></h3>
<p>Resolution refers to the process of producing an output from a block, after which the block is referred to as 'resolved.' </p>
<h3><a class="header" href="#resolver" id="resolver">Resolver</a></h3>
<p>The component of the Rant runtime that handles block resolution.</p>
<h3><a class="header" href="#shadowing-1" id="shadowing-1">Shadowing</a></h3>
<p>A variable is <strong>shadowed</strong> (hidden) when it is overridden by a variable of the same name in a child scope.</p>
<h3><a class="header" href="#setter" id="setter">Setter</a></h3>
<p>A setter is an accessor type that writes to a variable or collection.</p>
<h3><a class="header" href="#sink" id="sink">Sink</a></h3>
<p>A sink is an operation that suppresses the output of a program element while still allowing its execution.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        
        <!-- Google Analytics Tag -->
        <script type="text/javascript">
            var localAddrs = ["localhost", "127.0.0.1", ""];

            // make sure we don't activate google analytics if the developer is
            // inspecting the book locally...
            if (localAddrs.indexOf(document.location.hostname) === -1) {
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-179100611-2', 'auto');
                ga('send', 'pageview');
            }
        </script>
        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
