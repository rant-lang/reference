<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js ayu">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>@weight - Rant Reference</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="The Rant Reference documents the Rant language and standard library.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../../favicon.svg">
        
        
        <link rel="shortcut icon" href="../../favicon.png">
        
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
        <link rel="stylesheet" href="../../theme/custom.css">
        

        
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "ayu";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../intro.html">Introduction</a></li><li class="chapter-item expanded "><a href="../../language.html"><strong aria-hidden="true">1.</strong> Language Features</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../language/text.html"><strong aria-hidden="true">1.1.</strong> Text</a></li><li class="chapter-item expanded "><a href="../../language/blocks.html"><strong aria-hidden="true">1.2.</strong> Blocks</a></li><li class="chapter-item expanded "><a href="../../language/functions.html"><strong aria-hidden="true">1.3.</strong> Functions</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../language/functions/lambdas.html"><strong aria-hidden="true">1.3.1.</strong> Lambdas</a></li><li class="chapter-item "><a href="../../language/functions/optional-parameters.html"><strong aria-hidden="true">1.3.2.</strong> Optional parameters</a></li><li class="chapter-item "><a href="../../language/functions/variadic-parameters.html"><strong aria-hidden="true">1.3.3.</strong> Variadic parameters</a></li><li class="chapter-item "><a href="../../language/functions/argument-spreading.html"><strong aria-hidden="true">1.3.4.</strong> Argument spreading</a></li><li class="chapter-item "><a href="../../language/functions/piping.html"><strong aria-hidden="true">1.3.5.</strong> Piping</a></li></ol></li><li class="chapter-item expanded "><a href="../../language/keywords.html"><strong aria-hidden="true">1.4.</strong> Keywords</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../language/keywords/require.html"><strong aria-hidden="true">1.4.1.</strong> @require</a></li><li class="chapter-item "><a href="../../language/keywords/return.html"><strong aria-hidden="true">1.4.2.</strong> @return</a></li><li class="chapter-item "><a href="../../language/keywords/continue.html"><strong aria-hidden="true">1.4.3.</strong> @continue</a></li><li class="chapter-item "><a href="../../language/keywords/break.html"><strong aria-hidden="true">1.4.4.</strong> @break</a></li><li class="chapter-item expanded "><a href="../../language/keywords/weight.html" class="active"><strong aria-hidden="true">1.4.5.</strong> @weight</a></li><li class="chapter-item "><a href="../../language/keywords/text.html"><strong aria-hidden="true">1.4.6.</strong> @text</a></li></ol></li><li class="chapter-item expanded "><a href="../../language/comments.html"><strong aria-hidden="true">1.5.</strong> Comments</a></li><li class="chapter-item expanded "><a href="../../language/escape-sequences.html"><strong aria-hidden="true">1.6.</strong> Escape Sequences</a></li><li class="chapter-item expanded "><a href="../../language/collections.html"><strong aria-hidden="true">1.7.</strong> Collections</a></li><li class="chapter-item expanded "><a href="../../language/accessors.html"><strong aria-hidden="true">1.8.</strong> Accessors</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../language/accessors/collection-access.html"><strong aria-hidden="true">1.8.1.</strong> Collection Access</a></li><li class="chapter-item "><a href="../../language/accessors/anonymous.html"><strong aria-hidden="true">1.8.2.</strong> Anonymous Accessors</a></li><li class="chapter-item "><a href="../../language/accessors/fallbacks.html"><strong aria-hidden="true">1.8.3.</strong> Fallbacks</a></li><li class="chapter-item "><a href="../../language/accessors/globals-descoping.html"><strong aria-hidden="true">1.8.4.</strong> Globals &amp; Descoping</a></li><li class="chapter-item "><a href="../../language/accessors/depth-operator.html"><strong aria-hidden="true">1.8.5.</strong> Depth Operator</a></li></ol></li><li class="chapter-item expanded "><a href="../../language/operators.html"><strong aria-hidden="true">1.9.</strong> Operators</a></li><li class="chapter-item expanded "><a href="../../language/conditional-statements.html"><strong aria-hidden="true">1.10.</strong> Conditional statements</a></li></ol></li><li class="chapter-item expanded "><a href="../../variables-types.html"><strong aria-hidden="true">2.</strong> Variables &amp; Data Types</a></li><li class="chapter-item expanded "><a href="../../runtime.html"><strong aria-hidden="true">3.</strong> Runtime Features</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../runtime/attributes.html"><strong aria-hidden="true">3.1.</strong> Attributes</a></li><li class="chapter-item expanded "><a href="../../runtime/formatters.html"><strong aria-hidden="true">3.2.</strong> Formatters</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../runtime/case-formatter.html"><strong aria-hidden="true">3.2.1.</strong> Case</a></li><li class="chapter-item "><a href="../../runtime/number-formatter.html"><strong aria-hidden="true">3.2.2.</strong> Numbers</a></li><li class="chapter-item "><a href="../../runtime/whitespace-formatter.html"><strong aria-hidden="true">3.2.3.</strong> Whitespace</a></li></ol></li><li class="chapter-item expanded "><a href="../../modules.html"><strong aria-hidden="true">3.3.</strong> Modules</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.</strong> üöß Proposed Features</div><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../proposals/special-variables.html"><strong aria-hidden="true">4.1.</strong> Special variables</a></li><li class="chapter-item expanded "><a href="../../proposals/aggregators.html"><strong aria-hidden="true">4.2.</strong> Aggregators</a></li><li class="chapter-item expanded "><a href="../../proposals/non-consuming-blocks.html"><strong aria-hidden="true">4.3.</strong> Non-consuming blocks</a></li></ol></li><li class="chapter-item expanded "><a href="../../stdlib.html"><strong aria-hidden="true">5.</strong> Standard Library</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../stdlib/general.html"><strong aria-hidden="true">5.1.</strong> General</a></li><li class="chapter-item expanded "><a href="../../stdlib/control-flow.html"><strong aria-hidden="true">5.2.</strong> Attributes &amp; Control Flow</a></li><li class="chapter-item expanded "><a href="../../stdlib/collections.html"><strong aria-hidden="true">5.3.</strong> Collections</a></li><li class="chapter-item expanded "><a href="../../stdlib/generators.html"><strong aria-hidden="true">5.4.</strong> Generators</a></li><li class="chapter-item expanded "><a href="../../stdlib/formatting.html"><strong aria-hidden="true">5.5.</strong> Formatting</a></li><li class="chapter-item expanded "><a href="../../stdlib/strings.html"><strong aria-hidden="true">5.6.</strong> Strings</a></li><li class="chapter-item expanded "><a href="../../stdlib/boolean.html"><strong aria-hidden="true">5.7.</strong> Boolean</a></li><li class="chapter-item expanded "><a href="../../stdlib/comparison.html"><strong aria-hidden="true">5.8.</strong> Comparison</a></li><li class="chapter-item expanded "><a href="../../stdlib/math.html"><strong aria-hidden="true">5.9.</strong> Math</a></li><li class="chapter-item expanded "><a href="../../stdlib/conversion.html"><strong aria-hidden="true">5.10.</strong> Conversion</a></li><li class="chapter-item expanded "><a href="../../stdlib/verification.html"><strong aria-hidden="true">5.11.</strong> Verification</a></li><li class="chapter-item expanded "><a href="../../stdlib/assertion.html"><strong aria-hidden="true">5.12.</strong> Assertion</a></li><li class="chapter-item expanded "><a href="../../stdlib/constants.html"><strong aria-hidden="true">5.13.</strong> Constants</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../../compiler-messages.html">List of compiler messages</a></li><li class="chapter-item expanded affix "><a href="../../rant-3-vs-4.html">Comparison of Rant 3 and 4</a></li><li class="chapter-item expanded affix "><a href="../../glossary.html">Glossary</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu (default)</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Rant Reference</h1>

                    <div class="right-buttons">
                        
                        
                        <a href="https://github.com/rant-lang/reference" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="weight"><a class="header" href="#weight">@weight</a></h1>
<p>The <code>@weight</code> charm assigns a weight value to the block element it is placed within.</p>
<h2 id="usage"><a class="header" href="#usage">Usage</a></h2>
<p>When writing a block with randomized selection, you may sometimes want to make some elements more or less likely to be selected.
This is where <code>@weight</code> comes in: by adding the <code>@weight</code> charm to a block element, you can specify the probability of it being selected.</p>
<p>The below snippet demonstrates the effect of block weights by generating a list of 20 random items of different rarities.</p>
<pre><code class="language-rant">[rep:20][sep:\n]
{
    {
        # Larger weights are more likely to be selected
        &quot;boring&quot; @weight 2
        |
        # Unweighted elements have a default weight of 1
        &quot;common&quot;
        |
        # Smaller weights are less likely to be selected
        &quot;uncommon&quot; @weight 0.5
        |
        # Expressions can be used to assign weights dynamically
        &quot;rare&quot; @weight [randf: 0.05; 0.1]
        |
        # Elements with a weight of 0 are never selected.
        # If all elements have weights of 0, the block will not run.
        &quot;unused&quot; @weight 0
    } {herb|fungus|potion|poison|mineral|book}
}
</code></pre>
<p>The output will look something like this:</p>
<pre><code>boring poison
boring fungus
boring poison
boring herb
boring mineral
common poison
boring mineral
boring fungus
common poison
uncommon fungus
common fungus
boring book
common herb
common potion
common herb
boring herb
rare book
uncommon mineral
common potion
common mineral
</code></pre>
<p>As you can see, &quot;boring&quot; and &quot;common&quot; items are by far the most frequently picked, while &quot;uncommon&quot; and &quot;rare&quot; items tend to occur much less frequently; 
&quot;unused&quot; items, on the other hand, never appear due to their weight of 0.</p>
<h3 id="evaluation"><a class="header" href="#evaluation">Evaluation</a></h3>
<p>When a weighted block resolves, it evaluates all weights in the order they appear before running any elements.
The weight values are retained until the block finishes resolving. For repeaters, all iterations use the same weights.</p>
<h3 id="valid-weight-values"><a class="header" href="#valid-weight-values">Valid weight values</a></h3>
<p>Weight values can be any number (<code>int</code> or <code>float</code>), other &quot;weight-like&quot; value, or an expression that evaluates to one of these;
there are, however, special cases where some values are handled differently:</p>
<ul>
<li>Negative weights are clamped to 0.</li>
<li>Positive infinity, negative infinity, and NaN also default to 0.</li>
<li><code>&lt;&gt;</code> produces a weight of 1.</li>
<li><code>@true</code> and <code>@false</code> produce weights of 1 and 0, respectively.</li>
</ul>
<h2 id="limitations"><a class="header" href="#limitations">Limitations</a></h2>
<p>Weights are currently only used by default block selection and will be ignored by custom selectors.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../../language/keywords/break.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../../language/keywords/text.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../../language/keywords/break.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../../language/keywords/text.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        
        <!-- Google Analytics Tag -->
        <script type="text/javascript">
            var localAddrs = ["localhost", "127.0.0.1", ""];

            // make sure we don't activate google analytics if the developer is
            // inspecting the book locally...
            if (localAddrs.indexOf(document.location.hostname) === -1) {
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-179100611-2', 'auto');
                ga('send', 'pageview');
            }
        </script>
        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
